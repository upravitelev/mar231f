<!DOCTYPE html>
<html lang="ru-RU" xml:lang="ru-RU">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Метрики монетизации pt.3 | Методы анализа больших данных</title>
  <meta name="description" content="Метрики монетизации pt.3 | Методы анализа больших данных" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Метрики монетизации pt.3 | Методы анализа больших данных" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Метрики монетизации pt.3 | Методы анализа больших данных" />
  
  
  

<meta name="author" content="Ph.A.Upravitelev" />


<meta name="date" content="2024-12-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="c5_monetization.html"/>
<link rel="next" href="c7_monetization.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">mar 231f</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Intro</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html"><i class="fa fa-check"></i>О курсе и аналитиках</a>
<ul>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#запись-занятия"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#обо-мне"><i class="fa fa-check"></i>Обо мне</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#contacts"><i class="fa fa-check"></i>Contacts</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#о-курсе"><i class="fa fa-check"></i>О курсе</a>
<ul>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#основные-темы"><i class="fa fa-check"></i>основные темы</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#дополнительные-темы"><i class="fa fa-check"></i>дополнительные темы</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#формы-контроля"><i class="fa fa-check"></i>формы контроля</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#виды-аналитиков"><i class="fa fa-check"></i>Виды аналитиков</a>
<ul>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#data-scientists"><i class="fa fa-check"></i>data scientists</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#web-аналитика"><i class="fa fa-check"></i>web-аналитика</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#маркетинговая-аналитика"><i class="fa fa-check"></i>маркетинговая аналитика</a></li>
<li><a href="c1_intro.html#section" id="toc-section"></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#продуктовая-аналитика"><i class="fa fa-check"></i>Продуктовая аналитика</a>
<ul>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#что-такое-продукт"><i class="fa fa-check"></i>что такое продукт</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#cxux-исследователи"><i class="fa fa-check"></i>CX/UX-исследователи</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#структура-команды-разработки"><i class="fa fa-check"></i>структура команды разработки</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#роли-продуктовых-аналитиков"><i class="fa fa-check"></i>роли продуктовых аналитиков</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#стадии-развития-продукта"><i class="fa fa-check"></i>Стадии развития продукта</a>
<ul>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#этапы-жизни"><i class="fa fa-check"></i>этапы жизни</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#технические-этапы"><i class="fa fa-check"></i>технические этапы</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#бизнес-модели"><i class="fa fa-check"></i>Бизнес-модели</a>
<ul>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#компоненты"><i class="fa fa-check"></i>компоненты</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#варианты"><i class="fa fa-check"></i>варианты</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#полезные-материалы"><i class="fa fa-check"></i>Полезные материалы</a></li>
<li class="chapter" data-level="" data-path="c1_intro.html"><a href="c1_intro.html#домашнее-задание"><i class="fa fa-check"></i>Домашнее задание</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html"><i class="fa fa-check"></i>Метрики вовлечения pt1</a>
<ul>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#запись-занятия-1"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#aarrr-фреймворк"><i class="fa fa-check"></i>AARRR фреймворк</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#user-aquisition"><i class="fa fa-check"></i>User Aquisition</a>
<ul>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#процесс-привлечения-пользователей"><i class="fa fa-check"></i>Процесс привлечения пользователей</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#маркетинговая-воронка-в-мобильных-приложениях"><i class="fa fa-check"></i>Маркетинговая воронка в мобильных приложениях</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#новый-пользователь"><i class="fa fa-check"></i>Новый пользователь</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#активность-и-вовлечение"><i class="fa fa-check"></i>Активность и вовлечение</a>
<ul>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#dau-wau-mau"><i class="fa fa-check"></i>DAU, WAU, MAU</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#stickness-sticky-factor"><i class="fa fa-check"></i>Stickness / Sticky factor</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#retention-rate"><i class="fa fa-check"></i>Retention rate</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#churn-rate"><i class="fa fa-check"></i>Churn rate</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#sessions-per-day"><i class="fa fa-check"></i>Sessions per day</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#полезные-материалы-1"><i class="fa fa-check"></i>Полезные материалы</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#домашнее-задание-1"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#level-1-iatytd"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#level-2-hntr"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#level-3-hmp"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#level-4-uv"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt1.html"><a href="метрики-вовлечения-pt1.html#level-5-n"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html"><i class="fa fa-check"></i>Метрики вовлечения pt2</a>
<ul>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#запись-занятия-2"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#код-занятия-на-python"><i class="fa fa-check"></i>Код занятия на Python</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#разбор-домашнего-задания"><i class="fa fa-check"></i>Разбор домашнего задания</a>
<ul>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#level-2-hntr-1"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#level-4-uv-1"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#level-5-n-1"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#расчет-retention"><i class="fa fa-check"></i>Расчет retention</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#домашнее-задание-2"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#level-1-iatytd-1"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#level-2-hntr-2"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#level-3-hmp-1"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#level-4-uv-2"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="метрики-вовлечения-pt2.html"><a href="метрики-вовлечения-pt2.html#level-5-n-2"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html"><i class="fa fa-check"></i>Метрики монетизации pt1</a>
<ul>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#запись-занятия-3"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#код-занятия-на-python-1"><i class="fa fa-check"></i>Код занятия на Python</a></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#разбор-домашнего-задания-1"><i class="fa fa-check"></i>Разбор домашнего задания</a>
<ul>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#level-2-hntr-3"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#level-3-hmp-2"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#level-5-n-3"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#метрики-монетизации"><i class="fa fa-check"></i>Метрики монетизации</a>
<ul>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#gross-net"><i class="fa fa-check"></i>Gross / Net</a></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#конверсия"><i class="fa fa-check"></i>Конверсия</a></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#практикум"><i class="fa fa-check"></i>Практикум</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#домашнее-задание-3"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#level-1-iatytd-2"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#level-2-hntr-4"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#level-3-hmp-3"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#level-4-uv-3"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="метрики-монетизации-pt1.html"><a href="метрики-монетизации-pt1.html#level-5-n-4"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html"><i class="fa fa-check"></i>Метрики монетизации pt.2</a>
<ul>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#запись-занятия-4"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#код-занятия-на-python-2"><i class="fa fa-check"></i>Код занятия на Python</a></li>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#разбор-домашнего-задания-2"><i class="fa fa-check"></i>Разбор домашнего задания</a>
<ul>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#level-4-uv-4"><i class="fa fa-check"></i>level 4 (UV)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#arpu-arppu"><i class="fa fa-check"></i>ARPU / ARPPU</a></li>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#полезные-материалы-2"><i class="fa fa-check"></i>Полезные материалы</a></li>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#домашнее-задание-4"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#level-1-iatytd-3"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#level-2-hntr-5"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#level-3-n"><i class="fa fa-check"></i>level 3 (N)</a></li>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#level-4-uv-5"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="c5_monetization.html"><a href="c5_monetization.html#level-5-n-5"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html"><i class="fa fa-check"></i>Метрики монетизации pt.3</a>
<ul>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#запись-занятия-5"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#код-занятия-на-python-3"><i class="fa fa-check"></i>Код занятия на Python</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#разбор-домашнего-задания-3"><i class="fa fa-check"></i>Разбор домашнего задания</a>
<ul>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#level-2-hntr-6"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#level-3-n-1"><i class="fa fa-check"></i>level 3 (N)</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#level-4-uv-6"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#level-5-n-6"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#метрики-монетизации-1"><i class="fa fa-check"></i>Метрики монетизации</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#arpdau"><i class="fa fa-check"></i>ARPDAU</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#paying-share"><i class="fa fa-check"></i>Paying share</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#воронка-платежей"><i class="fa fa-check"></i>Воронка платежей</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#домашнее-задание-5"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#level-1-iatytd-4"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#level-2-hntr-7"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#level-3-hmp-4"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#level-4-uv-7"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="c6_monetization.html"><a href="c6_monetization.html#level-5-n-7"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="c7_monetization.html"><a href="c7_monetization.html"><i class="fa fa-check"></i>Метрики монетизации pt.4</a>
<ul>
<li class="chapter" data-level="" data-path="c7_monetization.html"><a href="c7_monetization.html#запись-занятия-6"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="c7_monetization.html"><a href="c7_monetization.html#код-занятия-на-python-4"><i class="fa fa-check"></i>Код занятия на Python</a></li>
<li class="chapter" data-level="" data-path="c7_monetization.html"><a href="c7_monetization.html#разбор-домашнего-задания-4"><i class="fa fa-check"></i>Разбор домашнего задания</a>
<ul>
<li class="chapter" data-level="" data-path="c7_monetization.html"><a href="c7_monetization.html#level-2-hntr-8"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="c7_monetization.html"><a href="c7_monetization.html#level-3-hmp-5"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="c7_monetization.html"><a href="c7_monetization.html#level-4-uv-8"><i class="fa fa-check"></i>level 4 (UV)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="ux.html"><a href="ux.html"><i class="fa fa-check"></i>UX intro</a>
<ul>
<li class="chapter" data-level="" data-path="ux.html"><a href="ux.html#запись-занятия-7"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="ux.html"><a href="ux.html#полезные-ссылки"><i class="fa fa-check"></i>Полезные ссылки</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html"><i class="fa fa-check"></i>A/b-тесты</a>
<ul>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#запись-занятия-8"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#принятие-решений"><i class="fa fa-check"></i>Принятие решений</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#проверка-гипотез"><i class="fa fa-check"></i>Проверка гипотез</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#rice-framework"><i class="fa fa-check"></i>Rice framework</a>
<ul>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#охват-reach"><i class="fa fa-check"></i>Охват (Reach)</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#влияние-impact"><i class="fa fa-check"></i>Влияние (Impact)</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#уверенность-confidence"><i class="fa fa-check"></i>Уверенность (Confidence)</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#усилия-effort"><i class="fa fa-check"></i>Усилия (Effort)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#что-такое-ав-тесты"><i class="fa fa-check"></i>Что такое А/В-тесты</a>
<ul>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#определение"><i class="fa fa-check"></i>Определение</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#области-применения"><i class="fa fa-check"></i>Области применения</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#ab-тесты-в-жизни-продукта"><i class="fa fa-check"></i>A/B-тесты в жизни продукта</a>
<ul>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#ав-тесты-и-другие-инструменты"><i class="fa fa-check"></i>А/В-тесты и другие инструменты</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#дизайн-ав-тестов"><i class="fa fa-check"></i>Дизайн А/В-тестов</a>
<ul>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#общая-структура"><i class="fa fa-check"></i>Общая структура</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#cоставление-и-выбор-гипотезы"><i class="fa fa-check"></i>Cоставление и выбор гипотезы</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#выбор-метрики"><i class="fa fa-check"></i>выбор метрики</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#разбиение-на-группы"><i class="fa fa-check"></i>разбиение на группы</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#размер-аудитории"><i class="fa fa-check"></i>размер аудитории</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#размер-выборки"><i class="fa fa-check"></i>размер выборки</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#ошибки-в-ав-тестах"><i class="fa fa-check"></i>Ошибки в А/В-тестах</a>
<ul>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#ошибка-парадигмы"><i class="fa fa-check"></i>Ошибка парадигмы</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#ошибки-реализации"><i class="fa fa-check"></i>Ошибки реализации</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#ошибки-дизайна"><i class="fa fa-check"></i>Ошибки дизайна</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#ошибки-в-анализе"><i class="fa fa-check"></i>Ошибки в анализе</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#ошибки-в-интерпретации"><i class="fa fa-check"></i>Ошибки в интерпретации</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#pro-et-contra"><i class="fa fa-check"></i>Pro et contra</a>
<ul>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#contra"><i class="fa fa-check"></i>contra</a></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#pro"><i class="fa fa-check"></i>pro</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ab-тесты.html"><a href="ab-тесты.html#полезные-материалы-3"><i class="fa fa-check"></i>Полезные материалы</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="основы-статистики.html"><a href="основы-статистики.html"><i class="fa fa-check"></i>Основы статистики</a>
<ul>
<li class="chapter" data-level="" data-path="основы-статистики.html"><a href="основы-статистики.html#запись-занятия-9"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="основы-статистики.html"><a href="основы-статистики.html#презентация"><i class="fa fa-check"></i>Презентация</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="кейсы-ab-тестов.html"><a href="кейсы-ab-тестов.html"><i class="fa fa-check"></i>Кейсы A/B-тестов</a>
<ul>
<li class="chapter" data-level="" data-path="кейсы-ab-тестов.html"><a href="кейсы-ab-тестов.html#запись-занятия-10"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="кейсы-ab-тестов.html"><a href="кейсы-ab-тестов.html#домашнее-задание-6"><i class="fa fa-check"></i>Домашнее задание</a>
<ul>
<li class="chapter" data-level="" data-path="кейсы-ab-тестов.html"><a href="кейсы-ab-тестов.html#level-1-iatytd-5"><i class="fa fa-check"></i>level 1 (IATYTD)</a></li>
<li class="chapter" data-level="" data-path="кейсы-ab-тестов.html"><a href="кейсы-ab-тестов.html#level-2-hntr-9"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="кейсы-ab-тестов.html"><a href="кейсы-ab-тестов.html#level-3-hmp-6"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="кейсы-ab-тестов.html"><a href="кейсы-ab-тестов.html#level-4-uv-9"><i class="fa fa-check"></i>level 4 (UV)</a></li>
<li class="chapter" data-level="" data-path="кейсы-ab-тестов.html"><a href="кейсы-ab-тестов.html#level-5-n-8"><i class="fa fa-check"></i>level 5 (N)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="стат.html"><a href="стат.html"><i class="fa fa-check"></i>Стат.критерии</a>
<ul>
<li class="chapter" data-level="" data-path="стат.html"><a href="стат.html#запись-занятия-11"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="стат.html"><a href="стат.html#код-занятия-на-python-5"><i class="fa fa-check"></i>Код занятия на Python</a></li>
<li class="chapter" data-level="" data-path="стат.html"><a href="стат.html#разбор-домашнего-задания-5"><i class="fa fa-check"></i>Разбор домашнего задания</a>
<ul>
<li class="chapter" data-level="" data-path="стат.html"><a href="стат.html#level-2-hntr-10"><i class="fa fa-check"></i>level 2 (HNTR)</a></li>
<li class="chapter" data-level="" data-path="стат.html"><a href="стат.html#level-3-hmp-7"><i class="fa fa-check"></i>level 3 (HMP)</a></li>
<li class="chapter" data-level="" data-path="стат.html"><a href="стат.html#level-4-uv-10"><i class="fa fa-check"></i>level 4 (UV)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="dashboards.html"><a href="dashboards.html"><i class="fa fa-check"></i>Dashboards</a>
<ul>
<li class="chapter" data-level="" data-path="dashboards.html"><a href="dashboards.html#запись-занятия-12"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="dashboards.html"><a href="dashboards.html#датасеты"><i class="fa fa-check"></i>Датасеты</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html"><i class="fa fa-check"></i>SQL</a>
<ul>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#запись-занятия-13"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#dbeaver"><i class="fa fa-check"></i>DBeaver</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#параметры-подключений"><i class="fa fa-check"></i>Параметры подключений</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#sql-1"><i class="fa fa-check"></i>SQL</a>
<ul>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#main-structure"><i class="fa fa-check"></i>main structure</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#simple-query"><i class="fa fa-check"></i>simple query</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#select-columns-selection"><i class="fa fa-check"></i>select: columns selection</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#where-rows-selection"><i class="fa fa-check"></i>where: rows selection</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#group-by-aggregations"><i class="fa fa-check"></i>group by: aggregations</a></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#join"><i class="fa fa-check"></i>join</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#r-connectors"><i class="fa fa-check"></i>r connectors</a>
<ul>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#подключение-и-просмотр-бд-из-rstudio"><i class="fa fa-check"></i>Подключение и просмотр БД из RStudio</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sql.html"><a href="sql.html#полезные-ссылки-1"><i class="fa fa-check"></i>Полезные ссылки</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html"><i class="fa fa-check"></i>SQL advanced</a>
<ul>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#запись-занятия-14"><i class="fa fa-check"></i>Запись занятия</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#части-sql"><i class="fa fa-check"></i>Части SQL</a>
<ul>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#data-definition-language"><i class="fa fa-check"></i>Data Definition Language</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#data-manipulation-language"><i class="fa fa-check"></i>Data Manipulation Language</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#data-control-language"><i class="fa fa-check"></i>Data Control Language</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#transaction-control-language"><i class="fa fa-check"></i>Transaction Control Language</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#data-types"><i class="fa fa-check"></i>data types</a>
<ul>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#list"><i class="fa fa-check"></i>list</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#numeric-types"><i class="fa fa-check"></i>Numeric types</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#character-types"><i class="fa fa-check"></i>Character Types</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#datetime-types"><i class="fa fa-check"></i>Date/Time Types</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#type-conversion"><i class="fa fa-check"></i>type Conversion</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#values"><i class="fa fa-check"></i>values</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#subquery"><i class="fa fa-check"></i>subquery</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#common-tables-expressions"><i class="fa fa-check"></i>Common tables expressions</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#select-experiments"><i class="fa fa-check"></i>select experiments</a>
<ul>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#functions"><i class="fa fa-check"></i>functions</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#case"><i class="fa fa-check"></i>case</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#filter"><i class="fa fa-check"></i>filter</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#window-functions"><i class="fa fa-check"></i>Window functions</a>
<ul>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#row_number-over"><i class="fa fa-check"></i>row_number() over ()</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#over-partition-by"><i class="fa fa-check"></i>over (partition by)</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#total-sum"><i class="fa fa-check"></i>total sum</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#cumulative-sum"><i class="fa fa-check"></i>cumulative sum</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#explain"><i class="fa fa-check"></i>explain</a>
<ul>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#plan"><i class="fa fa-check"></i>plan</a></li>
<li class="chapter" data-level="" data-path="sql-advanced.html"><a href="sql-advanced.html#analyze"><i class="fa fa-check"></i>analyze</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Методы анализа больших данных</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c6_monetization" class="section level1 hasAnchor">
<h1>Метрики монетизации pt.3<a href="c6_monetization.html#c6_monetization" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="запись-занятия-5" class="section level2 unnumbered hasAnchor">
<h2>Запись занятия<a href="c6_monetization.html#запись-занятия-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/pHv379smESs?si=mcGL0VShCW0D4cFn" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
</iframe>
</div>
<div id="код-занятия-на-python-3" class="section level2 hasAnchor">
<h2>Код занятия на Python<a href="c6_monetization.html#код-занятия-на-python-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://colab.research.google.com/drive/1P36fEEJQHb-q5yKR9ieywopqd2USJ39b" class="uri">https://colab.research.google.com/drive/1P36fEEJQHb-q5yKR9ieywopqd2USJ39b</a></p>
</div>
<div id="разбор-домашнего-задания-3" class="section level2 hasAnchor">
<h2>Разбор домашнего задания<a href="c6_monetization.html#разбор-домашнего-задания-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Датасеты:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="c6_monetization.html#cb33-1" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb33-2"><a href="c6_monetization.html#cb33-2" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb33-3"><a href="c6_monetization.html#cb33-3" tabindex="-1"></a></span>
<span id="cb33-4"><a href="c6_monetization.html#cb33-4" tabindex="-1"></a><span class="co"># импортируем данные</span></span>
<span id="cb33-5"><a href="c6_monetization.html#cb33-5" tabindex="-1"></a><span class="co"># installs &lt;- fread(&#39;https://gitlab.com/hse_mar/mar211f/-/raw/main/data/installs.csv&#39;)</span></span>
<span id="cb33-6"><a href="c6_monetization.html#cb33-6" tabindex="-1"></a>installs <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&#39;./data/installs.csv&#39;</span>)</span>
<span id="cb33-7"><a href="c6_monetization.html#cb33-7" tabindex="-1"></a></span>
<span id="cb33-8"><a href="c6_monetization.html#cb33-8" tabindex="-1"></a><span class="co"># payments &lt;- fread(&#39;https://gitlab.com/hse_mar/mar211f/-/raw/main/data/payments_custom.csv&#39;)</span></span>
<span id="cb33-9"><a href="c6_monetization.html#cb33-9" tabindex="-1"></a>payments <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&#39;./data/payments.csv&#39;</span>)</span>
<span id="cb33-10"><a href="c6_monetization.html#cb33-10" tabindex="-1"></a></span>
<span id="cb33-11"><a href="c6_monetization.html#cb33-11" tabindex="-1"></a><span class="co"># делаем рыбу, чтобы учесть потерянные дни, в которых не было платежей</span></span>
<span id="cb33-12"><a href="c6_monetization.html#cb33-12" tabindex="-1"></a>arpu_fish <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb33-13"><a href="c6_monetization.html#cb33-13" tabindex="-1"></a>  <span class="at">dt =</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">&#39;2022-06-01&#39;</span>), <span class="fu">as.Date</span>(<span class="st">&#39;2022-07-31&#39;</span>), <span class="at">by =</span> <span class="dv">1</span>)</span>
<span id="cb33-14"><a href="c6_monetization.html#cb33-14" tabindex="-1"></a>)</span>
<span id="cb33-15"><a href="c6_monetization.html#cb33-15" tabindex="-1"></a>arpu_fish <span class="ot">&lt;-</span> arpu_fish[, <span class="fu">list</span>(<span class="at">lifetime =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">30</span>), by <span class="ot">=</span> dt]</span>
<span id="cb33-16"><a href="c6_monetization.html#cb33-16" tabindex="-1"></a></span>
<span id="cb33-17"><a href="c6_monetization.html#cb33-17" tabindex="-1"></a></span>
<span id="cb33-18"><a href="c6_monetization.html#cb33-18" tabindex="-1"></a><span class="co"># корректируем медиасорсы</span></span>
<span id="cb33-19"><a href="c6_monetization.html#cb33-19" tabindex="-1"></a>installs[media_source <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;organic&#39;</span>, <span class="st">&#39;other&#39;</span>) <span class="sc">|</span> <span class="fu">is.na</span>(media_source), media_source <span class="sc">:=</span> <span class="st">&#39;organic&#39;</span>]</span></code></pre></div>
<div id="level-2-hntr-6" class="section level3 hasAnchor">
<h3>level 2 (HNTR)<a href="c6_monetization.html#level-2-hntr-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Постройте график накопительной конверсии в когорте июньских пользователей с разбивкой по источнику пользователей.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="c6_monetization.html#cb34-1" tabindex="-1"></a><span class="co"># к платежам присоединяем дату инсталла и источник трафика</span></span>
<span id="cb34-2"><a href="c6_monetization.html#cb34-2" tabindex="-1"></a>conversion <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb34-3"><a href="c6_monetization.html#cb34-3" tabindex="-1"></a>  payments,</span>
<span id="cb34-4"><a href="c6_monetization.html#cb34-4" tabindex="-1"></a>  installs[, <span class="fu">list</span>(user_pseudo_id, media_source, dt)],</span>
<span id="cb34-5"><a href="c6_monetization.html#cb34-5" tabindex="-1"></a>  <span class="at">by =</span> <span class="st">&#39;user_pseudo_id&#39;</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span></span>
<span id="cb34-6"><a href="c6_monetization.html#cb34-6" tabindex="-1"></a>)</span>
<span id="cb34-7"><a href="c6_monetization.html#cb34-7" tabindex="-1"></a></span>
<span id="cb34-8"><a href="c6_monetization.html#cb34-8" tabindex="-1"></a><span class="co"># берем июньскую когорту и ограничиваем даты лайфтайма</span></span>
<span id="cb34-9"><a href="c6_monetization.html#cb34-9" tabindex="-1"></a>conversion[, lifetime <span class="sc">:=</span> pay_dt <span class="sc">-</span> dt]</span>
<span id="cb34-10"><a href="c6_monetization.html#cb34-10" tabindex="-1"></a>conversion <span class="ot">&lt;-</span> conversion[dt <span class="sc">&lt;</span> <span class="st">&#39;2022-07-01&#39;</span>]</span>
<span id="cb34-11"><a href="c6_monetization.html#cb34-11" tabindex="-1"></a>conversion <span class="ot">&lt;-</span> conversion[lifetime <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> lifetime <span class="sc">&lt;=</span> <span class="dv">30</span>]</span>
<span id="cb34-12"><a href="c6_monetization.html#cb34-12" tabindex="-1"></a></span>
<span id="cb34-13"><a href="c6_monetization.html#cb34-13" tabindex="-1"></a><span class="co"># беру минимальный день от инсталла</span></span>
<span id="cb34-14"><a href="c6_monetization.html#cb34-14" tabindex="-1"></a><span class="co"># это будет день первого платежа</span></span>
<span id="cb34-15"><a href="c6_monetization.html#cb34-15" tabindex="-1"></a>conversion_stat <span class="ot">&lt;-</span> conversion[, <span class="fu">list</span>(<span class="at">lifetime =</span> <span class="fu">min</span>(lifetime)), by <span class="ot">=</span> <span class="fu">list</span>(user_pseudo_id, media_source)]</span>
<span id="cb34-16"><a href="c6_monetization.html#cb34-16" tabindex="-1"></a></span>
<span id="cb34-17"><a href="c6_monetization.html#cb34-17" tabindex="-1"></a><span class="co"># считаю количество пользователей, которые сделали платеж на этот день</span></span>
<span id="cb34-18"><a href="c6_monetization.html#cb34-18" tabindex="-1"></a>conversion_stat <span class="ot">&lt;-</span> conversion_stat[, <span class="fu">list</span>(<span class="at">new_payers =</span> <span class="fu">uniqueN</span>(user_pseudo_id)), by <span class="ot">=</span> <span class="fu">list</span>(media_source, lifetime)]</span>
<span id="cb34-19"><a href="c6_monetization.html#cb34-19" tabindex="-1"></a></span>
<span id="cb34-20"><a href="c6_monetization.html#cb34-20" tabindex="-1"></a><span class="co"># считаю, сколько всего было пользователей в когорте</span></span>
<span id="cb34-21"><a href="c6_monetization.html#cb34-21" tabindex="-1"></a><span class="co"># conversion_stat[, total_users := installs[dt &lt; &#39;2022-07-01&#39;, uniqueN(user_pseudo_id)]]</span></span>
<span id="cb34-22"><a href="c6_monetization.html#cb34-22" tabindex="-1"></a></span>
<span id="cb34-23"><a href="c6_monetization.html#cb34-23" tabindex="-1"></a>conversion_stat <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb34-24"><a href="c6_monetization.html#cb34-24" tabindex="-1"></a>  installs[dt <span class="sc">&lt;</span> <span class="st">&#39;2022-07-01&#39;</span>, <span class="fu">list</span>(<span class="at">total_users =</span> <span class="fu">uniqueN</span>(user_pseudo_id)), <span class="at">by =</span> media_source],</span>
<span id="cb34-25"><a href="c6_monetization.html#cb34-25" tabindex="-1"></a>  conversion_stat,</span>
<span id="cb34-26"><a href="c6_monetization.html#cb34-26" tabindex="-1"></a>  <span class="at">by =</span> <span class="st">&#39;media_source&#39;</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span></span>
<span id="cb34-27"><a href="c6_monetization.html#cb34-27" tabindex="-1"></a>)</span>
<span id="cb34-28"><a href="c6_monetization.html#cb34-28" tabindex="-1"></a></span>
<span id="cb34-29"><a href="c6_monetization.html#cb34-29" tabindex="-1"></a><span class="co"># сортирую и считаю накопительное количество пользователей, которые сделали </span></span>
<span id="cb34-30"><a href="c6_monetization.html#cb34-30" tabindex="-1"></a><span class="co"># первый платеж в этот день от инсталла</span></span>
<span id="cb34-31"><a href="c6_monetization.html#cb34-31" tabindex="-1"></a>conversion_stat <span class="ot">&lt;-</span> conversion_stat[<span class="fu">order</span>(media_source, lifetime)]</span>
<span id="cb34-32"><a href="c6_monetization.html#cb34-32" tabindex="-1"></a></span>
<span id="cb34-33"><a href="c6_monetization.html#cb34-33" tabindex="-1"></a>conversion_stat[, new_payers_cum <span class="sc">:=</span> <span class="fu">cumsum</span>(new_payers), by <span class="ot">=</span> media_source]</span>
<span id="cb34-34"><a href="c6_monetization.html#cb34-34" tabindex="-1"></a></span>
<span id="cb34-35"><a href="c6_monetization.html#cb34-35" tabindex="-1"></a><span class="co"># считаю накопительную конверсию в платящих</span></span>
<span id="cb34-36"><a href="c6_monetization.html#cb34-36" tabindex="-1"></a>conversion_stat[, cum_conversion <span class="sc">:=</span> new_payers_cum <span class="sc">/</span> total_users]</span>
<span id="cb34-37"><a href="c6_monetization.html#cb34-37" tabindex="-1"></a></span>
<span id="cb34-38"><a href="c6_monetization.html#cb34-38" tabindex="-1"></a><span class="co"># рисую</span></span>
<span id="cb34-39"><a href="c6_monetization.html#cb34-39" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb34-40"><a href="c6_monetization.html#cb34-40" tabindex="-1"></a>  conversion_stat, <span class="at">x =</span> <span class="sc">~</span>lifetime, <span class="at">y =</span> <span class="sc">~</span>cum_conversion, <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode=</span><span class="st">&#39;lines&#39;</span>, <span class="at">color =</span> <span class="sc">~</span>media_source</span>
<span id="cb34-41"><a href="c6_monetization.html#cb34-41" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb34-42"><a href="c6_monetization.html#cb34-42" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb34-43"><a href="c6_monetization.html#cb34-43" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&#39;Накопительная конверсия в зависимости от источников трафика&#39;</span>,</span>
<span id="cb34-44"><a href="c6_monetization.html#cb34-44" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">rangemode =</span> <span class="st">&#39;tozero&#39;</span>)</span>
<span id="cb34-45"><a href="c6_monetization.html#cb34-45" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb34-46"><a href="c6_monetization.html#cb34-46" tabindex="-1"></a>  <span class="fu">config</span>(<span class="at">displayModeBar =</span> <span class="cn">FALSE</span>)    </span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-cb8cb9bc05928061631f" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-cb8cb9bc05928061631f">{"x":{"visdat":{"353847c2a17":["function () ","plotlyVisDat"]},"cur_data":"353847c2a17","attrs":{"353847c2a17":{"x":{},"y":{},"mode":"lines","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Накопительная конверсия в зависимости от источников трафика","yaxis":{"domain":[0,1],"automargin":true,"rangemode":"tozero","title":"cum_conversion"},"xaxis":{"domain":[0,1],"automargin":true,"title":"lifetime"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],"y":[0.005031933423650087,0.0082943957532693735,0.010008570875611711,0.011114490309380961,0.012026873842240592,0.012579833559125217,0.012911609389255993,0.013575161049517543,0.013823992922115624,0.014100472780557937,0.014266360695623323,0.014487544582377174,0.014653432497442562,0.014819320412507948,0.014957560341729105,0.015151096242638724,0.015289336171859879,0.015455224086925267,0.015676407973679116,0.015786999917056042,0.01595288783212143,0.016091127761342586,0.016229367690563743,0.0163676076197849,0.016505847549006056,0.016616439492382978,0.016671735464071441,0.016727031435759904,0.016837623379136829,0.017003511294202217],"mode":"lines","type":"scatter","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0,1,2,3,5,7,8,9,11,13,17,27,29],"y":[0.013878180416345412,0.022359290670778721,0.024672320740169621,0.030069390902081727,0.030840400925212029,0.031611410948342328,0.033924441017733231,0.035466461063993829,0.037008481110254433,0.038550501156515038,0.039321511179645337,0.040092521202775636,0.040863531225905934],"mode":"lines","type":"scatter","name":"Facebook Ads","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],"y":[0.0095876232499863805,0.015144086724410307,0.018194694122133245,0.020074086179658987,0.02132701421800948,0.022852317916870948,0.023860107860761561,0.024432096747834614,0.025140273465163152,0.025793975050389498,0.026447676635615841,0.026856240126382307,0.027210328485046575,0.027455466579506455,0.027864030070272921,0.02800021790052841,0.028272593561039387,0.028408781391294873,0.028626681919703655,0.028953532712316828,0.029062482976521219,0.029253145938878903,0.029416571335185489,0.029579996731492073,0.029743422127798659,0.029988560222258539,0.030043035354360734,0.030179223184616223,0.030315411014871712,0.03034264858092281,0.030506073977229396],"mode":"lines","type":"scatter","name":"applovin_int","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0,1,2,3,4,5,6,7,8,9,10,12,13,14,15,16,17,18,20,21,24,25,26,30],"y":[0.0075962405046993689,0.011072486159392301,0.012874983906270118,0.014162482296897129,0.014677481653147934,0.01532123084846144,0.015707480365649541,0.016093729882837648,0.016737479078151152,0.017509978112527358,0.018024977468778163,0.018282477146903568,0.018411226985966266,0.018668726664091671,0.018926226342217072,0.019054976181279774,0.019312475859405175,0.019441225698467877,0.019569975537530579,0.019698725376593278,0.01982747521565598,0.020084974893781384,0.020599974250032186,0.020728724089094888],"mode":"lines","type":"scatter","name":"googleadwords_int","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,20,21,22,23,24,25,26,27,28,29,30],"y":[0.017098971163599479,0.028256774380524562,0.032169250833212579,0.035502101144761627,0.038979857991595424,0.039849297203303866,0.040863642950297055,0.042892334444283441,0.043761773655991883,0.044921025938269819,0.04651499782640197,0.047529343573395159,0.047964063179249387,0.049123315461527317,0.049702941602666278,0.050282567743805247,0.051296913490798436,0.051731633096652657,0.052021446167222145,0.052456165773076366,0.052890885378930587,0.053325604984784815,0.053615418055354296,0.054050137661208524,0.054195044196493264,0.054484857267062745,0.054919576872916966,0.055064483408201713,0.055354296478771194,0.055789016084625415],"mode":"lines","type":"scatter","name":"organic","marker":{"color":"rgba(166,216,84,1)","line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,20,21,22,23,24,25,27,28],"y":[0.003647638154295094,0.0060641984315155939,0.0071128944008754334,0.0078424220317344518,0.0081615903702352728,0.0090279044318803577,0.0093470727703811787,0.0095294546780959333,0.0097118365858106879,0.0099854094473828189,0.010213386832026264,0.010350173262812328,0.010532555170527085,0.010669341601313149,0.010760532555170527,0.010851723509027904,0.01098850993981397,0.011079700893671348,0.011216487324457413,0.011353273755243479,0.011398869232172169,0.011535655662958234,0.011626846616815612,0.0116724420937443,0.011809228524530367,0.011900419478387743,0.011946014955316433],"mode":"lines","type":"scatter","name":"unityads_int","marker":{"color":"rgba(255,217,47,1)","line":{"color":"rgba(255,217,47,1)"}},"textfont":{"color":"rgba(255,217,47,1)"},"error_y":{"color":"rgba(255,217,47,1)"},"error_x":{"color":"rgba(255,217,47,1)"},"line":{"color":"rgba(255,217,47,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="level-3-n-1" class="section level3 hasAnchor">
<h3>level 3 (N)<a href="c6_monetization.html#level-3-n-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Посчитайте динамику метрики конверсию в платящих в дни 0, 3, 7, 30 от инсталла.
На графике на оси OX должна быть дата инсталла, на оси OY – значение конверсии в день инсталла.
Делать аналогично динамике ретеншена первого дня.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="c6_monetization.html#cb35-1" tabindex="-1"></a><span class="co"># Посчитайте по каждой платформе динамику метрики конверсии в платящих в день инсталла. 0, 3, 7, 30</span></span>
<span id="cb35-2"><a href="c6_monetization.html#cb35-2" tabindex="-1"></a><span class="co"># На графике на оси OX должна быть дата инсталла, на оси OY – значение конверсии в день инсталла. </span></span>
<span id="cb35-3"><a href="c6_monetization.html#cb35-3" tabindex="-1"></a><span class="co"># Делать аналогично динамике ретеншена первого дня.</span></span>
<span id="cb35-4"><a href="c6_monetization.html#cb35-4" tabindex="-1"></a></span>
<span id="cb35-5"><a href="c6_monetization.html#cb35-5" tabindex="-1"></a>conversion_dyn <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb35-6"><a href="c6_monetization.html#cb35-6" tabindex="-1"></a>  payments,</span>
<span id="cb35-7"><a href="c6_monetization.html#cb35-7" tabindex="-1"></a>  installs[, <span class="fu">list</span>(user_pseudo_id, media_source, dt)],</span>
<span id="cb35-8"><a href="c6_monetization.html#cb35-8" tabindex="-1"></a>  <span class="at">by =</span> <span class="st">&#39;user_pseudo_id&#39;</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span></span>
<span id="cb35-9"><a href="c6_monetization.html#cb35-9" tabindex="-1"></a>)</span>
<span id="cb35-10"><a href="c6_monetization.html#cb35-10" tabindex="-1"></a>conversion_dyn <span class="ot">&lt;-</span> conversion_dyn[<span class="sc">!</span><span class="fu">is.na</span>(dt)]</span>
<span id="cb35-11"><a href="c6_monetization.html#cb35-11" tabindex="-1"></a></span>
<span id="cb35-12"><a href="c6_monetization.html#cb35-12" tabindex="-1"></a><span class="co"># берем июньскую когорту и ограничиваем даты лайфтайма</span></span>
<span id="cb35-13"><a href="c6_monetization.html#cb35-13" tabindex="-1"></a>conversion_dyn[, lifetime <span class="sc">:=</span> pay_dt <span class="sc">-</span> dt]</span>
<span id="cb35-14"><a href="c6_monetization.html#cb35-14" tabindex="-1"></a></span>
<span id="cb35-15"><a href="c6_monetization.html#cb35-15" tabindex="-1"></a><span class="co"># это будет день первого платежа</span></span>
<span id="cb35-16"><a href="c6_monetization.html#cb35-16" tabindex="-1"></a>conversion_dyn_stat <span class="ot">&lt;-</span> conversion_dyn[, <span class="fu">list</span>(<span class="at">lifetime =</span> <span class="fu">min</span>(lifetime)), by <span class="ot">=</span> <span class="fu">list</span>(user_pseudo_id, dt)]</span>
<span id="cb35-17"><a href="c6_monetization.html#cb35-17" tabindex="-1"></a></span>
<span id="cb35-18"><a href="c6_monetization.html#cb35-18" tabindex="-1"></a><span class="co"># считаю количество пользователей, которые сделали платеж на этот день</span></span>
<span id="cb35-19"><a href="c6_monetization.html#cb35-19" tabindex="-1"></a>conversion_dyn_stat <span class="ot">&lt;-</span> conversion_dyn_stat[, <span class="fu">list</span>(<span class="at">new_payers =</span> <span class="fu">uniqueN</span>(user_pseudo_id)), </span>
<span id="cb35-20"><a href="c6_monetization.html#cb35-20" tabindex="-1"></a>                                           by <span class="ot">=</span> <span class="fu">list</span>(dt, lifetime)]</span>
<span id="cb35-21"><a href="c6_monetization.html#cb35-21" tabindex="-1"></a></span>
<span id="cb35-22"><a href="c6_monetization.html#cb35-22" tabindex="-1"></a><span class="co"># присоединяем рыбу</span></span>
<span id="cb35-23"><a href="c6_monetization.html#cb35-23" tabindex="-1"></a>conversion_dyn_stat <span class="ot">&lt;-</span> <span class="fu">merge</span>(arpu_fish, conversion_dyn_stat, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;dt&#39;</span>, <span class="st">&#39;lifetime&#39;</span>), <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb35-24"><a href="c6_monetization.html#cb35-24" tabindex="-1"></a></span>
<span id="cb35-25"><a href="c6_monetization.html#cb35-25" tabindex="-1"></a><span class="co"># считаю, сколько всего было пользователей в когорте</span></span>
<span id="cb35-26"><a href="c6_monetization.html#cb35-26" tabindex="-1"></a><span class="co"># conversion_stat[, total_users := installs[dt &lt; &#39;2022-07-01&#39;, uniqueN(user_pseudo_id)]]</span></span>
<span id="cb35-27"><a href="c6_monetization.html#cb35-27" tabindex="-1"></a></span>
<span id="cb35-28"><a href="c6_monetization.html#cb35-28" tabindex="-1"></a>conversion_dyn_stat <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb35-29"><a href="c6_monetization.html#cb35-29" tabindex="-1"></a>  installs[, <span class="fu">list</span>(<span class="at">total_users =</span> <span class="fu">uniqueN</span>(user_pseudo_id)), <span class="at">by =</span> dt],</span>
<span id="cb35-30"><a href="c6_monetization.html#cb35-30" tabindex="-1"></a>  conversion_dyn_stat,</span>
<span id="cb35-31"><a href="c6_monetization.html#cb35-31" tabindex="-1"></a>  <span class="at">by =</span> <span class="st">&#39;dt&#39;</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span></span>
<span id="cb35-32"><a href="c6_monetization.html#cb35-32" tabindex="-1"></a>)</span>
<span id="cb35-33"><a href="c6_monetization.html#cb35-33" tabindex="-1"></a></span>
<span id="cb35-34"><a href="c6_monetization.html#cb35-34" tabindex="-1"></a><span class="co"># сортирую и считаю накопительное количество пользователей, которые сделали </span></span>
<span id="cb35-35"><a href="c6_monetization.html#cb35-35" tabindex="-1"></a><span class="co"># первый платеж в этот день от инсталла</span></span>
<span id="cb35-36"><a href="c6_monetization.html#cb35-36" tabindex="-1"></a>conversion_dyn_stat <span class="ot">&lt;-</span> conversion_dyn_stat[<span class="fu">order</span>(dt, lifetime)]</span>
<span id="cb35-37"><a href="c6_monetization.html#cb35-37" tabindex="-1"></a>conversion_dyn_stat[<span class="fu">is.na</span>(new_payers), new_payers <span class="sc">:=</span> <span class="dv">0</span>]</span>
<span id="cb35-38"><a href="c6_monetization.html#cb35-38" tabindex="-1"></a>conversion_dyn_stat[, new_payers_cum <span class="sc">:=</span> <span class="fu">cumsum</span>(new_payers), by <span class="ot">=</span> dt]</span>
<span id="cb35-39"><a href="c6_monetization.html#cb35-39" tabindex="-1"></a></span>
<span id="cb35-40"><a href="c6_monetization.html#cb35-40" tabindex="-1"></a><span class="co"># считаю накопительную конверсию в платящих</span></span>
<span id="cb35-41"><a href="c6_monetization.html#cb35-41" tabindex="-1"></a>conversion_dyn_stat[, cum_conversion <span class="sc">:=</span> new_payers_cum <span class="sc">/</span> total_users]</span>
<span id="cb35-42"><a href="c6_monetization.html#cb35-42" tabindex="-1"></a></span>
<span id="cb35-43"><a href="c6_monetization.html#cb35-43" tabindex="-1"></a><span class="co"># рисую</span></span>
<span id="cb35-44"><a href="c6_monetization.html#cb35-44" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb35-45"><a href="c6_monetization.html#cb35-45" tabindex="-1"></a>  conversion_dyn_stat[lifetime <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">30</span>)], </span>
<span id="cb35-46"><a href="c6_monetization.html#cb35-46" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>dt, <span class="at">y =</span> <span class="sc">~</span>cum_conversion, </span>
<span id="cb35-47"><a href="c6_monetization.html#cb35-47" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode=</span><span class="st">&#39;lines&#39;</span>, <span class="at">color =</span> <span class="sc">~</span><span class="fu">as.character</span>(lifetime)</span>
<span id="cb35-48"><a href="c6_monetization.html#cb35-48" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb35-49"><a href="c6_monetization.html#cb35-49" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb35-50"><a href="c6_monetization.html#cb35-50" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&#39;Накопительная конверсия в дневных когортах&#39;</span>,</span>
<span id="cb35-51"><a href="c6_monetization.html#cb35-51" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">rangemode =</span> <span class="st">&#39;tozero&#39;</span>)</span>
<span id="cb35-52"><a href="c6_monetization.html#cb35-52" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb35-53"><a href="c6_monetization.html#cb35-53" tabindex="-1"></a>  <span class="fu">config</span>(<span class="at">displayModeBar =</span> <span class="cn">FALSE</span>)    </span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-5983692addba9c515429" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-5983692addba9c515429">{"x":{"visdat":{"353822007a0d":["function () ","plotlyVisDat"]},"cur_data":"353822007a0d","attrs":{"353822007a0d":{"x":{},"y":{},"mode":"lines","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Накопительная конверсия в дневных когортах","yaxis":{"domain":[0,1],"automargin":true,"rangemode":"tozero","title":"cum_conversion"},"xaxis":{"domain":[0,1],"automargin":true,"title":"dt"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":["2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08","2022-06-09","2022-06-10","2022-06-11","2022-06-12","2022-06-13","2022-06-14","2022-06-15","2022-06-16","2022-06-17","2022-06-18","2022-06-19","2022-06-20","2022-06-21","2022-06-22","2022-06-23","2022-06-24","2022-06-25","2022-06-26","2022-06-27","2022-06-28","2022-06-29","2022-06-30","2022-07-01","2022-07-02","2022-07-03","2022-07-04","2022-07-05","2022-07-06","2022-07-07","2022-07-08","2022-07-09","2022-07-10","2022-07-11","2022-07-12","2022-07-13","2022-07-14","2022-07-15","2022-07-16","2022-07-17","2022-07-18","2022-07-19","2022-07-20","2022-07-21","2022-07-22","2022-07-23","2022-07-24","2022-07-25","2022-07-26","2022-07-27","2022-07-28","2022-07-29","2022-07-30","2022-07-31"],"y":[0.0070792418360356244,0.0093908629441624373,0.0075036075036075036,0.0075051171253127128,0.008271131732902965,0.010029633006610439,0.010384215991692628,0.0098353156450137237,0.0077948202162434,0.0069910514541387022,0.006617820846135665,0.0089794130530004377,0.0082046332046332038,0.0088948787061994602,0.007192396609298741,0.0084418716835504108,0.0043548017419206969,0.0053995680345572351,0.0062300319488817887,0.0070121429793056269,0.0039318479685452159,0.0079337702656088298,0.010207673354452657,0.0045026606631191155,0.007575757575757576,0.0035476718403547672,0.0038186157517899762,0.0033025099075297227,0.0029695619896065329,0.0096286107290233843,0.0051635111876075735,0.0031847133757961785,0.011023622047244094,0.009852216748768473,0.01,0.0040733197556008143,0.01556420233463035,0.011194029850746268,0.010638297872340425,0.0067226890756302525,0.013986013986013986,0.0080160320641282558,0.0089686098654708519,0,0.0097323600973236012,0.0044843049327354259,0.0071258907363420431,0.0024096385542168677,0.0022831050228310501,0.0082644628099173556,0.0075949367088607592,0.0045662100456621002,0.0023696682464454978,0.0044247787610619468,0.0076142131979695434,0.0073349633251833741,0.0077319587628865982,0.0044444444444444444,0.0080645161290322578,0.0063424947145877377,0.0022471910112359553],"mode":"lines","type":"scatter","name":"0","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08","2022-06-09","2022-06-10","2022-06-11","2022-06-12","2022-06-13","2022-06-14","2022-06-15","2022-06-16","2022-06-17","2022-06-18","2022-06-19","2022-06-20","2022-06-21","2022-06-22","2022-06-23","2022-06-24","2022-06-25","2022-06-26","2022-06-27","2022-06-28","2022-06-29","2022-06-30","2022-07-01","2022-07-02","2022-07-03","2022-07-04","2022-07-05","2022-07-06","2022-07-07","2022-07-08","2022-07-09","2022-07-10","2022-07-11","2022-07-12","2022-07-13","2022-07-14","2022-07-15","2022-07-16","2022-07-17","2022-07-18","2022-07-19","2022-07-20","2022-07-21","2022-07-22","2022-07-23","2022-07-24","2022-07-25","2022-07-26","2022-07-27","2022-07-28","2022-07-29","2022-07-30","2022-07-31"],"y":[0.01644211007079242,0.017766497461928935,0.01875901875901876,0.020468501250852856,0.016743998386120638,0.021198997036699339,0.019470404984423675,0.020814272644098811,0.015841086245914005,0.018176733780760627,0.015126447648310093,0.017520805957074025,0.017133204633204634,0.018867924528301886,0.016439763678397123,0.018089725036179449,0.00962640385056154,0.0093592512598992088,0.012140575079872205,0.013340174448435094,0.0085190039318479693,0.017937219730941704,0.015839493136219639,0.013098649201801064,0.011363636363636364,0.010199556541019957,0.008591885441527447,0.0059445178335535004,0.0074239049740163323,0.012379642365887207,0.010327022375215147,0.0079617834394904458,0.01889763779527559,0.016420361247947456,0.012,0.012219959266802444,0.023346303501945526,0.027985074626865673,0.014184397163120567,0.0084033613445378148,0.015734265734265736,0.01002004008016032,0.017937219730941704,0.0082815734989648039,0.017031630170316302,0.0089686098654708519,0.011876484560570071,0.014457831325301205,0.0045662100456621002,0.01928374655647383,0.015189873417721518,0.011415525114155251,0.011848341232227487,0.0066371681415929203,0.01015228426395939,0.012224938875305624,0.012886597938144329,0.0066666666666666671,0.010080645161290322,0.012684989429175475,0.0022471910112359553],"mode":"lines","type":"scatter","name":"3","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08","2022-06-09","2022-06-10","2022-06-11","2022-06-12","2022-06-13","2022-06-14","2022-06-15","2022-06-16","2022-06-17","2022-06-18","2022-06-19","2022-06-20","2022-06-21","2022-06-22","2022-06-23","2022-06-24","2022-06-25","2022-06-26","2022-06-27","2022-06-28","2022-06-29","2022-06-30","2022-07-01","2022-07-02","2022-07-03","2022-07-04","2022-07-05","2022-07-06","2022-07-07","2022-07-08","2022-07-09","2022-07-10","2022-07-11","2022-07-12","2022-07-13","2022-07-14","2022-07-15","2022-07-16","2022-07-17","2022-07-18","2022-07-19","2022-07-20","2022-07-21","2022-07-22","2022-07-23","2022-07-24","2022-07-25","2022-07-26","2022-07-27","2022-07-28","2022-07-29","2022-07-30","2022-07-31"],"y":[0.024434802466316512,0.029441624365482234,0.029437229437229439,0.030247896292926995,0.028041153923744198,0.03122863004330978,0.030633437175493251,0.030192131747483988,0.025898918783002264,0.025727069351230425,0.024344126683999056,0.027595269382391589,0.022924710424710424,0.028840970350404314,0.022861546365271001,0.026772793053545588,0.016731606692642675,0.014578833693304536,0.016134185303514376,0.021378484693004959,0.015945827872433378,0.025181096929975853,0.022527279127067933,0.017191977077363897,0.017518939393939392,0.015077605321507761,0.013842482100238664,0.011228533685601057,0.012620638455827766,0.017881705639614855,0.017211703958691909,0.019108280254777069,0.028346456692913385,0.026272577996715927,0.02,0.022403258655804479,0.029182879377431907,0.033582089552238806,0.031914893617021274,0.01680672268907563,0.022727272727272728,0.014028056112224449,0.022421524663677129,0.012422360248447204,0.024330900243309004,0.011210762331838564,0.0166270783847981,0.019277108433734941,0.0091324200913242004,0.022038567493112948,0.022784810126582278,0.013698630136986301,0.014218009478672985,0.0066371681415929203,0.015228426395939087,0.012224938875305624,0.012886597938144329,0.0066666666666666671,0.010080645161290322,0.012684989429175475,0.0022471910112359553],"mode":"lines","type":"scatter","name":"30","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08","2022-06-09","2022-06-10","2022-06-11","2022-06-12","2022-06-13","2022-06-14","2022-06-15","2022-06-16","2022-06-17","2022-06-18","2022-06-19","2022-06-20","2022-06-21","2022-06-22","2022-06-23","2022-06-24","2022-06-25","2022-06-26","2022-06-27","2022-06-28","2022-06-29","2022-06-30","2022-07-01","2022-07-02","2022-07-03","2022-07-04","2022-07-05","2022-07-06","2022-07-07","2022-07-08","2022-07-09","2022-07-10","2022-07-11","2022-07-12","2022-07-13","2022-07-14","2022-07-15","2022-07-16","2022-07-17","2022-07-18","2022-07-19","2022-07-20","2022-07-21","2022-07-22","2022-07-23","2022-07-24","2022-07-25","2022-07-26","2022-07-27","2022-07-28","2022-07-29","2022-07-30","2022-07-31"],"y":[0.01918246174925782,0.021065989847715735,0.021356421356421358,0.025699340459404141,0.022190841234617713,0.024618190107134716,0.023104880581516097,0.02584629460201281,0.02036711088760372,0.020134228187919462,0.017726305837863388,0.021681997371879105,0.020028957528957531,0.022641509433962263,0.019265348060621627,0.022672455378678243,0.011918404767361907,0.011159107271418287,0.01437699680511182,0.015563536856507611,0.011795543905635648,0.021041738530527768,0.017599436818021823,0.015554645927138764,0.014204545454545454,0.012860310421286032,0.011455847255369928,0.0079260237780713338,0.0096510764662212315,0.013755158184319119,0.01549053356282272,0.012738853503184714,0.022047244094488189,0.021346469622331693,0.016,0.018329938900203666,0.025291828793774319,0.027985074626865673,0.017730496453900711,0.011764705882352941,0.02097902097902098,0.014028056112224449,0.020179372197309416,0.010351966873706004,0.019464720194647202,0.011210762331838564,0.0166270783847981,0.016867469879518072,0.0045662100456621002,0.022038567493112948,0.020253164556962026,0.011415525114155251,0.014218009478672985,0.0066371681415929203,0.015228426395939087,0.012224938875305624,0.012886597938144329,0.0066666666666666671,0.010080645161290322,0.012684989429175475,0.0022471910112359553],"mode":"lines","type":"scatter","name":"7","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Посчитайте по каждой платформе динамику метрики конверсию в платящих в день инсталла.
На графике на оси OX должна быть дата инсталла, на оси OY – значение конверсии в день инсталла.
Делать аналогично динамике ретеншена первого дня.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="c6_monetization.html#cb36-1" tabindex="-1"></a>conversion_dyn <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb36-2"><a href="c6_monetization.html#cb36-2" tabindex="-1"></a>  payments,</span>
<span id="cb36-3"><a href="c6_monetization.html#cb36-3" tabindex="-1"></a>  installs[, <span class="fu">list</span>(user_pseudo_id, platform, dt)],</span>
<span id="cb36-4"><a href="c6_monetization.html#cb36-4" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;user_pseudo_id&#39;</span>, <span class="st">&#39;platform&#39;</span>), <span class="at">all.x =</span> <span class="cn">TRUE</span></span>
<span id="cb36-5"><a href="c6_monetization.html#cb36-5" tabindex="-1"></a>)</span>
<span id="cb36-6"><a href="c6_monetization.html#cb36-6" tabindex="-1"></a>conversion_dyn <span class="ot">&lt;-</span> conversion_dyn[<span class="sc">!</span><span class="fu">is.na</span>(dt)]</span>
<span id="cb36-7"><a href="c6_monetization.html#cb36-7" tabindex="-1"></a></span>
<span id="cb36-8"><a href="c6_monetization.html#cb36-8" tabindex="-1"></a><span class="co"># берем июньскую когорту и ограничиваем даты лайфтайма</span></span>
<span id="cb36-9"><a href="c6_monetization.html#cb36-9" tabindex="-1"></a>conversion_dyn[, lifetime <span class="sc">:=</span> pay_dt <span class="sc">-</span> dt]</span>
<span id="cb36-10"><a href="c6_monetization.html#cb36-10" tabindex="-1"></a></span>
<span id="cb36-11"><a href="c6_monetization.html#cb36-11" tabindex="-1"></a></span>
<span id="cb36-12"><a href="c6_monetization.html#cb36-12" tabindex="-1"></a><span class="co"># это будет день первого платежа</span></span>
<span id="cb36-13"><a href="c6_monetization.html#cb36-13" tabindex="-1"></a>conversion_dyn_stat <span class="ot">&lt;-</span> conversion_dyn[, <span class="fu">list</span>(<span class="at">lifetime =</span> <span class="fu">min</span>(lifetime)), by <span class="ot">=</span> <span class="fu">list</span>(user_pseudo_id, dt, platform)]</span>
<span id="cb36-14"><a href="c6_monetization.html#cb36-14" tabindex="-1"></a></span>
<span id="cb36-15"><a href="c6_monetization.html#cb36-15" tabindex="-1"></a><span class="co"># считаю количество пользователей, которые сделали платеж на этот день</span></span>
<span id="cb36-16"><a href="c6_monetization.html#cb36-16" tabindex="-1"></a>conversion_dyn_stat <span class="ot">&lt;-</span> conversion_dyn_stat[, <span class="fu">list</span>(<span class="at">new_payers =</span> <span class="fu">uniqueN</span>(user_pseudo_id)), </span>
<span id="cb36-17"><a href="c6_monetization.html#cb36-17" tabindex="-1"></a>                                           by <span class="ot">=</span> <span class="fu">list</span>(platform, dt, lifetime)]</span>
<span id="cb36-18"><a href="c6_monetization.html#cb36-18" tabindex="-1"></a></span>
<span id="cb36-19"><a href="c6_monetization.html#cb36-19" tabindex="-1"></a>conversion_dyn_stat <span class="ot">&lt;-</span> <span class="fu">merge</span>(arpu_fish, conversion_dyn_stat, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;dt&#39;</span>, <span class="st">&#39;lifetime&#39;</span>), <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-20"><a href="c6_monetization.html#cb36-20" tabindex="-1"></a></span>
<span id="cb36-21"><a href="c6_monetization.html#cb36-21" tabindex="-1"></a><span class="co"># считаю, сколько всего было пользователей в когорте</span></span>
<span id="cb36-22"><a href="c6_monetization.html#cb36-22" tabindex="-1"></a><span class="co"># conversion_stat[, total_users := installs[dt &lt; &#39;2022-07-01&#39;, uniqueN(user_pseudo_id)]]</span></span>
<span id="cb36-23"><a href="c6_monetization.html#cb36-23" tabindex="-1"></a></span>
<span id="cb36-24"><a href="c6_monetization.html#cb36-24" tabindex="-1"></a>conversion_dyn_stat <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb36-25"><a href="c6_monetization.html#cb36-25" tabindex="-1"></a>  installs[, <span class="fu">list</span>(<span class="at">total_users =</span> <span class="fu">uniqueN</span>(user_pseudo_id)), <span class="at">by =</span> <span class="fu">list</span>(platform, dt)],</span>
<span id="cb36-26"><a href="c6_monetization.html#cb36-26" tabindex="-1"></a>  conversion_dyn_stat,</span>
<span id="cb36-27"><a href="c6_monetization.html#cb36-27" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;dt&#39;</span>, <span class="st">&#39;platform&#39;</span>), <span class="at">all.x =</span> <span class="cn">TRUE</span></span>
<span id="cb36-28"><a href="c6_monetization.html#cb36-28" tabindex="-1"></a>)</span>
<span id="cb36-29"><a href="c6_monetization.html#cb36-29" tabindex="-1"></a></span>
<span id="cb36-30"><a href="c6_monetization.html#cb36-30" tabindex="-1"></a><span class="co"># сортирую и считаю накопительное количество пользователей, которые сделали </span></span>
<span id="cb36-31"><a href="c6_monetization.html#cb36-31" tabindex="-1"></a><span class="co"># первый платеж в этот день от инсталла</span></span>
<span id="cb36-32"><a href="c6_monetization.html#cb36-32" tabindex="-1"></a>conversion_dyn_stat <span class="ot">&lt;-</span> conversion_dyn_stat[<span class="fu">order</span>(platform, dt, lifetime)]</span>
<span id="cb36-33"><a href="c6_monetization.html#cb36-33" tabindex="-1"></a>conversion_dyn_stat[<span class="fu">is.na</span>(new_payers), new_payers <span class="sc">:=</span> <span class="dv">0</span>]</span>
<span id="cb36-34"><a href="c6_monetization.html#cb36-34" tabindex="-1"></a>conversion_dyn_stat[, new_payers_cum <span class="sc">:=</span> <span class="fu">cumsum</span>(new_payers), by <span class="ot">=</span> <span class="fu">list</span>(platform, dt)]</span>
<span id="cb36-35"><a href="c6_monetization.html#cb36-35" tabindex="-1"></a></span>
<span id="cb36-36"><a href="c6_monetization.html#cb36-36" tabindex="-1"></a><span class="co"># считаю накопительную конверсию в платящих</span></span>
<span id="cb36-37"><a href="c6_monetization.html#cb36-37" tabindex="-1"></a>conversion_dyn_stat[, cum_conversion <span class="sc">:=</span> new_payers_cum <span class="sc">/</span> total_users]</span>
<span id="cb36-38"><a href="c6_monetization.html#cb36-38" tabindex="-1"></a></span>
<span id="cb36-39"><a href="c6_monetization.html#cb36-39" tabindex="-1"></a><span class="co"># рисую</span></span>
<span id="cb36-40"><a href="c6_monetization.html#cb36-40" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb36-41"><a href="c6_monetization.html#cb36-41" tabindex="-1"></a>  conversion_dyn_stat[lifetime <span class="sc">==</span> <span class="dv">0</span>], </span>
<span id="cb36-42"><a href="c6_monetization.html#cb36-42" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>dt, <span class="at">y =</span> <span class="sc">~</span>cum_conversion, </span>
<span id="cb36-43"><a href="c6_monetization.html#cb36-43" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode=</span><span class="st">&#39;lines&#39;</span>, <span class="at">color =</span> <span class="sc">~</span>platform</span>
<span id="cb36-44"><a href="c6_monetization.html#cb36-44" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb36-45"><a href="c6_monetization.html#cb36-45" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb36-46"><a href="c6_monetization.html#cb36-46" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&#39;Динамика конверсии в платящих в дневных когортах в день инсталла&#39;</span>,</span>
<span id="cb36-47"><a href="c6_monetization.html#cb36-47" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">rangemode =</span> <span class="st">&#39;tozero&#39;</span>)</span>
<span id="cb36-48"><a href="c6_monetization.html#cb36-48" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb36-49"><a href="c6_monetization.html#cb36-49" tabindex="-1"></a>  <span class="fu">config</span>(<span class="at">displayModeBar =</span> <span class="cn">FALSE</span>)    </span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-776a47537d002c8ee688" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-776a47537d002c8ee688">{"x":{"visdat":{"353836915493":["function () ","plotlyVisDat"]},"cur_data":"353836915493","attrs":{"353836915493":{"x":{},"y":{},"mode":"lines","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Динамика конверсии в платящих в дневных когортах в день инсталла","yaxis":{"domain":[0,1],"automargin":true,"rangemode":"tozero","title":"cum_conversion"},"xaxis":{"domain":[0,1],"automargin":true,"title":"dt"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":["2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08","2022-06-09","2022-06-10","2022-06-11","2022-06-12","2022-06-13","2022-06-14","2022-06-15","2022-06-16","2022-06-17","2022-06-18","2022-06-19","2022-06-20","2022-06-21","2022-06-22","2022-06-23","2022-06-24","2022-06-25","2022-06-26","2022-06-27","2022-06-28","2022-06-29","2022-06-30","2022-07-01","2022-07-02","2022-07-03","2022-07-04","2022-07-05","2022-07-06","2022-07-07","2022-07-08","2022-07-09","2022-07-10","2022-07-11","2022-07-12","2022-07-13","2022-07-15","2022-07-16","2022-07-17","2022-07-18","2022-07-19","2022-07-21","2022-07-22","2022-07-24","2022-07-25","2022-07-28","2022-07-29","2022-07-30","2022-07-31"],"y":[0.0041067761806981521,0.0088211708099438652,0.0033881897386253629,0.0043305665824612052,0.0047664442326024788,0.0059502975148757438,0.006331618519984171,0.0073298429319371729,0.0054687499999999997,0.0066904549509366638,0.0046829971181556193,0.0062335958005249343,0.0050468637346791634,0.0045833333333333334,0.0045575389289783516,0.0040363269424823411,0.0030129557095510697,0.0040376850605652759,0.0027700831024930748,0.004377880184331797,0.0019607843137254902,0.0036463081130355514,0.0068306010928961746,0.0021097046413502108,0.0052478134110787176,0.0026581605528973951,0.0034762456546929316,0.001693480101608806,0.0018921475875118259,0.0081799591002044997,0.0027700831024930748,0.0026666666666666666,0.0055710306406685237,0.0089020771513353119,0.0069686411149825784,0.0035087719298245615,0.011029411764705883,0.0095541401273885346,0.0098039215686274508,0.0084269662921348312,0.011661807580174927,0.003003003003003003,0.003952569169960474,0.014084507042253521,0.0042194092827004216,0.0095238095238095247,0.0045662100456621002,0.0039215686274509803,0.0046296296296296294,0.00390625,0.008658008658008658,0.009433962264150943,0.0040322580645161289,0.007575757575757576,0.0040983606557377051,0.0045871559633027525],"mode":"lines","type":"scatter","name":"ANDROID","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08","2022-06-09","2022-06-10","2022-06-11","2022-06-12","2022-06-13","2022-06-14","2022-06-15","2022-06-16","2022-06-17","2022-06-18","2022-06-19","2022-06-20","2022-06-21","2022-06-22","2022-06-23","2022-06-24","2022-06-25","2022-06-26","2022-06-27","2022-06-28","2022-06-29","2022-06-30","2022-07-01","2022-07-02","2022-07-03","2022-07-04","2022-07-05","2022-07-06","2022-07-07","2022-07-08","2022-07-09","2022-07-10","2022-07-11","2022-07-12","2022-07-13","2022-07-15","2022-07-16","2022-07-17","2022-07-20","2022-07-21","2022-07-22","2022-07-23","2022-07-25","2022-07-26","2022-07-27","2022-07-28","2022-07-29","2022-07-30"],"y":[0.013040494166094716,0.010373443983402489,0.013581129378127233,0.012915129151291513,0.014364640883977901,0.017647058823529412,0.018113207547169812,0.014598540145985401,0.011997177134791814,0.0074962518740629685,0.010309278350515464,0.014492753623188406,0.014598540145985401,0.016793893129770993,0.012698412698412698,0.019607843137254902,0.0086206896551724137,0.01092896174863388,0.016592214422463305,0.014598540145985401,0.010912698412698412,0.021276595744680851,0.021705426356589147,0.012797074954296161,0.017632241813602016,0.0080213903743315516,0.0054200542005420054,0.0090090090090090089,0.0068965517241379309,0.012605042016806723,0.0090909090909090905,0.003952569169960474,0.018115942028985508,0.011029411764705883,0.014084507042253521,0.0048543689320388345,0.020661157024793389,0.013513513513513514,0.011627906976744186,0.0041841004184100415,0.017467248908296942,0.018072289156626505,0.015544041450777202,0.0050505050505050509,0.0047846889952153108,0.0047393364928909956,0.018633540372670808,0.0111731843575419,0.0054945054945054949,0.0051813471502590676,0.0054945054945054949,0.014492753623188406,0.017142857142857144,0.0049504950495049506,0.0086206896551724137,0.0087336244541484712],"mode":"lines","type":"scatter","name":"IOS","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="level-4-uv-6" class="section level3 hasAnchor">
<h3>level 4 (UV)<a href="c6_monetization.html#level-4-uv-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Постройте и нарисуйте структуру накопительного ARPU для июньских пользователей в зависимости оттого, какие offer_type покупали пользователи. Таким образом мы можем понять, какая товарная категория делает наибольший вклад в кумулятивное ARPU.</p>
<p>ИЛИ</p>
<p>Постройте график накопительного ARPU в когорте июньских пользователей с разбивкой по источнику пользователей.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="c6_monetization.html#cb37-1" tabindex="-1"></a><span class="co"># к платежам присоединяем дату инсталла и источник трафика</span></span>
<span id="cb37-2"><a href="c6_monetization.html#cb37-2" tabindex="-1"></a>arpu_june <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb37-3"><a href="c6_monetization.html#cb37-3" tabindex="-1"></a>  payments,</span>
<span id="cb37-4"><a href="c6_monetization.html#cb37-4" tabindex="-1"></a>  installs[, <span class="fu">list</span>(user_pseudo_id, media_source, dt)],</span>
<span id="cb37-5"><a href="c6_monetization.html#cb37-5" tabindex="-1"></a>  <span class="at">by =</span> <span class="st">&#39;user_pseudo_id&#39;</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span></span>
<span id="cb37-6"><a href="c6_monetization.html#cb37-6" tabindex="-1"></a>)</span>
<span id="cb37-7"><a href="c6_monetization.html#cb37-7" tabindex="-1"></a></span>
<span id="cb37-8"><a href="c6_monetization.html#cb37-8" tabindex="-1"></a><span class="co"># берем июньскую когорту и ограничиваем даты лайфтайма</span></span>
<span id="cb37-9"><a href="c6_monetization.html#cb37-9" tabindex="-1"></a>arpu_june[, lifetime <span class="sc">:=</span> pay_dt <span class="sc">-</span> dt]</span>
<span id="cb37-10"><a href="c6_monetization.html#cb37-10" tabindex="-1"></a>arpu_june <span class="ot">&lt;-</span> conversion[dt <span class="sc">&lt;</span> <span class="st">&#39;2022-07-01&#39;</span>]</span>
<span id="cb37-11"><a href="c6_monetization.html#cb37-11" tabindex="-1"></a>arpu_june <span class="ot">&lt;-</span> arpu_june[lifetime <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> lifetime <span class="sc">&lt;=</span> <span class="dv">30</span>]</span>
<span id="cb37-12"><a href="c6_monetization.html#cb37-12" tabindex="-1"></a></span>
<span id="cb37-13"><a href="c6_monetization.html#cb37-13" tabindex="-1"></a></span>
<span id="cb37-14"><a href="c6_monetization.html#cb37-14" tabindex="-1"></a><span class="co"># считаем деньги, которые платили в определенный день от инстала</span></span>
<span id="cb37-15"><a href="c6_monetization.html#cb37-15" tabindex="-1"></a>arpu_june_stat <span class="ot">&lt;-</span> arpu_june[, <span class="fu">list</span>(<span class="at">gross =</span> <span class="fu">sum</span>(gross)), by <span class="ot">=</span> <span class="fu">list</span>(lifetime, offer_type)]</span>
<span id="cb37-16"><a href="c6_monetization.html#cb37-16" tabindex="-1"></a></span>
<span id="cb37-17"><a href="c6_monetization.html#cb37-17" tabindex="-1"></a><span class="co"># считаю, сколько всего было пользователей в когорте</span></span>
<span id="cb37-18"><a href="c6_monetization.html#cb37-18" tabindex="-1"></a>arpu_june_stat[, total_users <span class="sc">:=</span> installs[dt <span class="sc">&lt;</span> <span class="st">&#39;2022-07-01&#39;</span>, <span class="fu">uniqueN</span>(user_pseudo_id)]]</span>
<span id="cb37-19"><a href="c6_monetization.html#cb37-19" tabindex="-1"></a></span>
<span id="cb37-20"><a href="c6_monetization.html#cb37-20" tabindex="-1"></a><span class="co"># сортирую и считаю накопительную сумму денег, которую заплатили пользователи</span></span>
<span id="cb37-21"><a href="c6_monetization.html#cb37-21" tabindex="-1"></a>arpu_june_stat <span class="ot">&lt;-</span> arpu_june_stat[<span class="fu">order</span>(offer_type, lifetime)]</span>
<span id="cb37-22"><a href="c6_monetization.html#cb37-22" tabindex="-1"></a>arpu_june_stat[, gross_cum <span class="sc">:=</span> <span class="fu">cumsum</span>(gross), by <span class="ot">=</span> offer_type]</span>
<span id="cb37-23"><a href="c6_monetization.html#cb37-23" tabindex="-1"></a></span>
<span id="cb37-24"><a href="c6_monetization.html#cb37-24" tabindex="-1"></a><span class="co"># считаю накопительную конверсию в платящих</span></span>
<span id="cb37-25"><a href="c6_monetization.html#cb37-25" tabindex="-1"></a>arpu_june_stat[, cum_ARPU <span class="sc">:=</span> gross_cum <span class="sc">/</span> total_users]</span>
<span id="cb37-26"><a href="c6_monetization.html#cb37-26" tabindex="-1"></a></span>
<span id="cb37-27"><a href="c6_monetization.html#cb37-27" tabindex="-1"></a><span class="co"># рисую</span></span>
<span id="cb37-28"><a href="c6_monetization.html#cb37-28" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb37-29"><a href="c6_monetization.html#cb37-29" tabindex="-1"></a>  arpu_june_stat, <span class="at">x =</span> <span class="sc">~</span>lifetime, <span class="at">y =</span> <span class="sc">~</span>cum_ARPU, <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode=</span><span class="st">&#39;none&#39;</span>, <span class="at">stackgroup =</span><span class="st">&#39;one&#39;</span>, <span class="at">color =</span> <span class="sc">~</span>offer_type</span>
<span id="cb37-30"><a href="c6_monetization.html#cb37-30" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb37-31"><a href="c6_monetization.html#cb37-31" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb37-32"><a href="c6_monetization.html#cb37-32" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&#39;Накопительное ARPU по категориям&#39;</span>,</span>
<span id="cb37-33"><a href="c6_monetization.html#cb37-33" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">rangemode =</span> <span class="st">&#39;tozero&#39;</span>)</span>
<span id="cb37-34"><a href="c6_monetization.html#cb37-34" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb37-35"><a href="c6_monetization.html#cb37-35" tabindex="-1"></a>  <span class="fu">config</span>(<span class="at">displayModeBar =</span> <span class="cn">FALSE</span>)    </span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-62eb15158ff6db8a7371" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-62eb15158ff6db8a7371">{"x":{"visdat":{"353841709da5":["function () ","plotlyVisDat"]},"cur_data":"353841709da5","attrs":{"353841709da5":{"x":{},"y":{},"mode":"none","stackgroup":"one","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Накопительное ARPU по категориям","yaxis":{"domain":[0,1],"automargin":true,"rangemode":"tozero","title":"cum_ARPU"},"xaxis":{"domain":[0,1],"automargin":true,"title":"lifetime"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],"y":[0.003490070409821269,0.0065473009568514208,0.0090180538003249728,0.012201660949629904,0.01422206174399712,0.01561039898898719,0.017468496118432937,0.0186046217728832,0.0194607329842932,0.020840584943130534,0.021534121682614198,0.022660588553890599,0.023679454775230195,0.024156887524823981,0.024589005235602101,0.025436540891857741,0.026112294638021311,0.027717909369922373,0.028853854486369387,0.029908376963350792,0.031441234879942236,0.033001173497021127,0.033370283444665111,0.034605795269904323,0.035299602816392855,0.035785972197147506,0.036615363784076559,0.037805560570500094,0.038373352590720354,0.039356111211410007,0.039878768730817839],"mode":"none","stackgroup":"one","type":"scatter","name":"category_1","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],"y":[0.031026809893482242,0.064448546669073153,0.095149575735691397,0.11619642534753462,0.13858864415959443,0.15989799602816271,0.17481196966961426,0.19019805018956371,0.20807925618342543,0.22462583498826388,0.23798826502978762,0.25105154359992665,0.26346786423542046,0.27360092074381548,0.28820048745260768,0.30093347174580143,0.31337606066076801,0.32218333634229901,0.33331124751760144,0.3445662574471916,0.35611725943310962,0.36615228380574011,0.37837154721068678,0.38997671059757977,0.39879536017331546,0.40799313955587552,0.41921213215381742,0.42898826502978776,0.43716663657699845,0.44885656255641715,0.45626900162484108],"mode":"none","stackgroup":"one","type":"scatter","name":"category_2","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],"y":[0.016331016428958324,0.027841307095143576,0.033685773605343985,0.038078895107420178,0.040508575555154427,0.042985647228741722,0.046780104712041963,0.050214118071854198,0.052467683697418388,0.054035927062646767,0.055793193717277562,0.056775139916952592,0.058407113197328116,0.060227929229102799,0.061246073298429397,0.062039447553710131,0.063121321538183867,0.064599927784798769,0.065465156165372893,0.06679969308539456,0.068665643617981664,0.07034284166817123,0.07159595594872728,0.072948275862069048,0.074805831377505044,0.076401516519227386,0.078006409099115437,0.079223686586026437,0.080558223506048104,0.082650658963711932,0.083804657880483913],"mode":"none","stackgroup":"one","type":"scatter","name":"custom_offer","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],"y":[0.046361166275500375,0.071834627189022476,0.086660678822891399,0.096354666907383202,0.10257474273334458,0.11128181982307196,0.11798194619967425,0.12479310344827509,0.13049647950893586,0.13638779563097955,0.14267683697418232,0.14682460732984218,0.15172495035204836,0.15717277486910922,0.16132884997291858,0.16692959017873188,0.17200649936811624,0.17684916049828414,0.18108738039357214,0.18422738761509225,0.18907302762231376,0.19374462899440259,0.19826322440873731,0.20198691099476368,0.2063710055966774,0.21046768369741758,0.21484112655713958,0.21920635493771368,0.22273253294818487,0.22743076367575304,0.2313996208701925],"mode":"none","stackgroup":"one","type":"scatter","name":"other","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="level-5-n-6" class="section level3 hasAnchor">
<h3>level 5 (N)<a href="c6_monetization.html#level-5-n-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Посчитайте по каждой платформе динамику ARPU 0, 1, 7 и 30 дней (сколько в среднем заплатили пользователи когорты в день инсталла, за 0 и 1 дни жизни в приложении, за первые 7 дней жизни, за первые 30 дней жизни в приложении).
На графике на оси OX должна быть дата инсталла, на оси OY – значение ARPU, с разбивкой, по какому количеству дней от инсталла мы это считаем</p>
<p>Делать аналогично динамике ретеншена, я показывал на занятии про ретеншен как раз близкое решение.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="c6_monetization.html#cb38-1" tabindex="-1"></a>arpu_dyn <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb38-2"><a href="c6_monetization.html#cb38-2" tabindex="-1"></a>  payments,</span>
<span id="cb38-3"><a href="c6_monetization.html#cb38-3" tabindex="-1"></a>  installs[, <span class="fu">list</span>(user_pseudo_id, platform, dt)],</span>
<span id="cb38-4"><a href="c6_monetization.html#cb38-4" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;user_pseudo_id&#39;</span>, <span class="st">&#39;platform&#39;</span>), <span class="at">all.x =</span> <span class="cn">TRUE</span></span>
<span id="cb38-5"><a href="c6_monetization.html#cb38-5" tabindex="-1"></a>)</span>
<span id="cb38-6"><a href="c6_monetization.html#cb38-6" tabindex="-1"></a></span>
<span id="cb38-7"><a href="c6_monetization.html#cb38-7" tabindex="-1"></a><span class="co"># удаляю пользователей, которые пришли раньше июня</span></span>
<span id="cb38-8"><a href="c6_monetization.html#cb38-8" tabindex="-1"></a>arpu_dyn <span class="ot">&lt;-</span> conversion_dyn[<span class="sc">!</span><span class="fu">is.na</span>(dt)]</span>
<span id="cb38-9"><a href="c6_monetization.html#cb38-9" tabindex="-1"></a>arpu_dyn[, lifetime <span class="sc">:=</span> pay_dt <span class="sc">-</span> dt]</span>
<span id="cb38-10"><a href="c6_monetization.html#cb38-10" tabindex="-1"></a></span>
<span id="cb38-11"><a href="c6_monetization.html#cb38-11" tabindex="-1"></a>arpu_dyn_stat <span class="ot">&lt;-</span> arpu_dyn[, <span class="fu">list</span>(<span class="at">gross =</span> <span class="fu">sum</span>(gross)), by <span class="ot">=</span> <span class="fu">list</span>(dt, lifetime)]</span>
<span id="cb38-12"><a href="c6_monetization.html#cb38-12" tabindex="-1"></a></span>
<span id="cb38-13"><a href="c6_monetization.html#cb38-13" tabindex="-1"></a></span>
<span id="cb38-14"><a href="c6_monetization.html#cb38-14" tabindex="-1"></a><span class="co"># присоединяю рыбу</span></span>
<span id="cb38-15"><a href="c6_monetization.html#cb38-15" tabindex="-1"></a>arpu_dyn_stat <span class="ot">&lt;-</span> <span class="fu">merge</span>(arpu_fish, arpu_dyn_stat, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;dt&#39;</span>, <span class="st">&#39;lifetime&#39;</span>), <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-16"><a href="c6_monetization.html#cb38-16" tabindex="-1"></a></span>
<span id="cb38-17"><a href="c6_monetization.html#cb38-17" tabindex="-1"></a><span class="co"># считаю, сколько всего было пользователей в когорте</span></span>
<span id="cb38-18"><a href="c6_monetization.html#cb38-18" tabindex="-1"></a><span class="co"># conversion_stat[, total_users := installs[dt &lt; &#39;2022-07-01&#39;, uniqueN(user_pseudo_id)]]</span></span>
<span id="cb38-19"><a href="c6_monetization.html#cb38-19" tabindex="-1"></a>arpu_dyn_stat <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb38-20"><a href="c6_monetization.html#cb38-20" tabindex="-1"></a>  installs[, <span class="fu">list</span>(<span class="at">total_users =</span> <span class="fu">uniqueN</span>(user_pseudo_id)), <span class="at">by =</span> <span class="fu">list</span>(dt)],</span>
<span id="cb38-21"><a href="c6_monetization.html#cb38-21" tabindex="-1"></a>  arpu_dyn_stat,</span>
<span id="cb38-22"><a href="c6_monetization.html#cb38-22" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;dt&#39;</span>), <span class="at">all.x =</span> <span class="cn">TRUE</span></span>
<span id="cb38-23"><a href="c6_monetization.html#cb38-23" tabindex="-1"></a>)</span>
<span id="cb38-24"><a href="c6_monetization.html#cb38-24" tabindex="-1"></a></span>
<span id="cb38-25"><a href="c6_monetization.html#cb38-25" tabindex="-1"></a><span class="co"># сортирую и считаю накопительный гросс</span></span>
<span id="cb38-26"><a href="c6_monetization.html#cb38-26" tabindex="-1"></a>arpu_dyn_stat <span class="ot">&lt;-</span> arpu_dyn_stat[<span class="fu">order</span>(dt, lifetime)]</span>
<span id="cb38-27"><a href="c6_monetization.html#cb38-27" tabindex="-1"></a>arpu_dyn_stat[<span class="fu">is.na</span>(gross), gross <span class="sc">:=</span> <span class="dv">0</span>]</span>
<span id="cb38-28"><a href="c6_monetization.html#cb38-28" tabindex="-1"></a>arpu_dyn_stat[, gross_cum <span class="sc">:=</span> <span class="fu">cumsum</span>(gross), by <span class="ot">=</span> <span class="fu">list</span>(dt)]</span>
<span id="cb38-29"><a href="c6_monetization.html#cb38-29" tabindex="-1"></a></span>
<span id="cb38-30"><a href="c6_monetization.html#cb38-30" tabindex="-1"></a><span class="co"># считаю накопительную конверсию в платящих</span></span>
<span id="cb38-31"><a href="c6_monetization.html#cb38-31" tabindex="-1"></a>arpu_dyn_stat[, cum_ARPU <span class="sc">:=</span> gross_cum <span class="sc">/</span> total_users]</span>
<span id="cb38-32"><a href="c6_monetization.html#cb38-32" tabindex="-1"></a></span>
<span id="cb38-33"><a href="c6_monetization.html#cb38-33" tabindex="-1"></a><span class="co"># рисую</span></span>
<span id="cb38-34"><a href="c6_monetization.html#cb38-34" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb38-35"><a href="c6_monetization.html#cb38-35" tabindex="-1"></a>  arpu_dyn_stat[lifetime <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">30</span>)], </span>
<span id="cb38-36"><a href="c6_monetization.html#cb38-36" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>dt, <span class="at">y =</span> <span class="sc">~</span>cum_ARPU, </span>
<span id="cb38-37"><a href="c6_monetization.html#cb38-37" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode=</span><span class="st">&#39;lines&#39;</span>, <span class="at">color =</span> <span class="sc">~</span><span class="fu">as.character</span>(lifetime)</span>
<span id="cb38-38"><a href="c6_monetization.html#cb38-38" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb38-39"><a href="c6_monetization.html#cb38-39" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb38-40"><a href="c6_monetization.html#cb38-40" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&#39;Динамика накопительного ARPU дневных когорт&#39;</span>,</span>
<span id="cb38-41"><a href="c6_monetization.html#cb38-41" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">rangemode =</span> <span class="st">&#39;tozero&#39;</span>)</span>
<span id="cb38-42"><a href="c6_monetization.html#cb38-42" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb38-43"><a href="c6_monetization.html#cb38-43" tabindex="-1"></a>  <span class="fu">config</span>(<span class="at">displayModeBar =</span> <span class="cn">FALSE</span>)    </span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-73aabb3b56390723bfff" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-73aabb3b56390723bfff">{"x":{"visdat":{"353847b20bd5":["function () ","plotlyVisDat"]},"cur_data":"353847b20bd5","attrs":{"353847b20bd5":{"x":{},"y":{},"mode":"lines","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Динамика накопительного ARPU дневных когорт","yaxis":{"domain":[0,1],"automargin":true,"rangemode":"tozero","title":"cum_ARPU"},"xaxis":{"domain":[0,1],"automargin":true,"title":"dt"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"data":[{"x":["2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08","2022-06-09","2022-06-10","2022-06-11","2022-06-12","2022-06-13","2022-06-14","2022-06-15","2022-06-16","2022-06-17","2022-06-18","2022-06-19","2022-06-20","2022-06-21","2022-06-22","2022-06-23","2022-06-24","2022-06-25","2022-06-26","2022-06-27","2022-06-28","2022-06-29","2022-06-30","2022-07-01","2022-07-02","2022-07-03","2022-07-04","2022-07-05","2022-07-06","2022-07-07","2022-07-08","2022-07-09","2022-07-10","2022-07-11","2022-07-12","2022-07-13","2022-07-14","2022-07-15","2022-07-16","2022-07-17","2022-07-18","2022-07-19","2022-07-20","2022-07-21","2022-07-22","2022-07-23","2022-07-24","2022-07-25","2022-07-26","2022-07-27","2022-07-28","2022-07-29","2022-07-30","2022-07-31"],"y":[0.10835122174012339,0.18054822335025392,0.13522655122655131,0.15423697975892667,0.15859189025620349,0.11429450649646693,0.094605399792315761,0.11239935956084181,0.05874528539099827,0.058660514541387036,0.079080595603876216,0.086806833114323328,0.078793436293436339,0.1459433962264152,0.036645260724377078,0.21614568258562486,0.051961952784781121,0.081799856011519123,0.068761980830670977,0.072243885753377854,0.055847531673219784,0.14473266643670235,0.12480112636395639,0.06372492836676219,0.056254734848484825,0.046447893569844766,0.033369928400954658,0.063355350066050212,0.023719376391982183,0.097496561210453928,0.054974182444061971,0.017452229299363058,0.41053543307086621,0.10164203612479475,0.081880000000000008,0.030509164969450102,0.13789883268482492,0.18830223880597011,0.30980496453900719,0.11747899159663866,0.12910839160839163,0.078016032064128271,0.080605381165919268,0,0.070462287104622878,0.076053811659192824,0.1161995249406176,0.091445783132530128,0.08894977168949772,0.2450137741046832,0.058126582278481012,0.070570776255707776,0.023672985781990522,0.022035398230088498,0.10644670050761422,0.043936430317848406,0.16474226804123712,0.053266666666666664,0.036189516129032262,0.054883720930232555,0.02244943820224719],"mode":"lines","type":"scatter","name":"0","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08","2022-06-09","2022-06-10","2022-06-11","2022-06-12","2022-06-13","2022-06-14","2022-06-15","2022-06-16","2022-06-17","2022-06-18","2022-06-19","2022-06-20","2022-06-21","2022-06-22","2022-06-23","2022-06-24","2022-06-25","2022-06-26","2022-06-27","2022-06-28","2022-06-29","2022-06-30","2022-07-01","2022-07-02","2022-07-03","2022-07-04","2022-07-05","2022-07-06","2022-07-07","2022-07-08","2022-07-09","2022-07-10","2022-07-11","2022-07-12","2022-07-13","2022-07-14","2022-07-15","2022-07-16","2022-07-17","2022-07-18","2022-07-19","2022-07-20","2022-07-21","2022-07-22","2022-07-23","2022-07-24","2022-07-25","2022-07-26","2022-07-27","2022-07-28","2022-07-29","2022-07-30","2022-07-31"],"y":[0.21685544644896107,0.37571319796954339,0.29571717171717188,0.82965203547873589,0.3189348396207386,0.25403692728516081,0.20507528556593985,0.26523101555352258,0.20662056826753847,0.19016219239373602,0.24195225714961016,0.26159001314060459,0.27380308880308896,0.32766576819407028,0.17872591831492426,0.54990834539315037,0.16593399037359616,0.20802195824334066,0.15504952076677322,0.21578074226098867,0.098152031454783795,0.32313556398758198,0.25417458641323482,0.17859598853868197,0.22456912878787871,0.15139689578713966,0.10485918854415274,0.1801651254953765,0.12377876763177433,0.26368638239339753,0.16493975903614461,0.13675159235668788,0.66672440944881894,0.34272577996715931,0.19374,0.23177189409368637,0.4542217898832685,0.60718283582089538,0.32921985815602844,0.20305882352941176,0.22164335664335663,0.2882565130260521,0.09618834080717488,0.047515527950310554,0.16272506082725061,0.11186098654708521,0.32261282660332541,0.24062650602409638,0.10488584474885844,0.50931129476584025,0.16425316455696201,0.40340182648401823,0.047251184834123224,0.092721238938053091,0.1419289340101523,0.10009779951100244,0.22394329896907217,0.099844444444444444,0.12280241935483872,0.26602536997885828,0.02244943820224719],"mode":"lines","type":"scatter","name":"3","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08","2022-06-09","2022-06-10","2022-06-11","2022-06-12","2022-06-13","2022-06-14","2022-06-15","2022-06-16","2022-06-17","2022-06-18","2022-06-19","2022-06-20","2022-06-21","2022-06-22","2022-06-23","2022-06-24","2022-06-25","2022-06-26","2022-06-27","2022-06-28","2022-06-29","2022-06-30","2022-07-01","2022-07-02","2022-07-03","2022-07-04","2022-07-05","2022-07-06","2022-07-07","2022-07-08","2022-07-09","2022-07-10","2022-07-11","2022-07-12","2022-07-13","2022-07-14","2022-07-15","2022-07-16","2022-07-17","2022-07-18","2022-07-19","2022-07-20","2022-07-21","2022-07-22","2022-07-23","2022-07-24","2022-07-25","2022-07-26","2022-07-27","2022-07-28","2022-07-29","2022-07-30","2022-07-31"],"y":[0.90298698332952743,0.7691751269035535,0.74028571428571444,2.1761041619285884,0.85372806132741597,0.9503601550034193,0.76152647975077892,0.78114135407136343,0.92498114156399314,0.74943232662192405,0.81399669108957717,0.92553438458169091,0.7469715250965252,0.82788948787062,0.53000000000000003,1.1336927158707193,0.79088012835205135,0.58314794816414695,0.62084025559105427,0.58085684966649576,0.29906509392747926,1.4907761296998967,0.83222104892643445,0.5543430208759722,0.75694602272727274,0.27805321507760528,0.43189976133651553,0.28709379128137386,0.81725315515961394,1.3834800550206328,4.2512736660929429,0.39925159235668789,1.046015748031496,0.95123152709359615,0.40742,1.0142362525458248,1.3180544747081713,1.1173880597014925,0.68180851063829795,0.31216806722689078,0.60909090909090913,0.77270541082164323,0.49475336322869956,0.22134575569358178,0.27201946472019461,0.26865470852017936,0.62144893111638955,0.36812048192771085,0.18013698630136987,0.71280991735537191,0.49050632911392406,0.75431506849315078,0.059075829383886252,0.12143805309734514,0.17738578680203046,0.12452322738386308,0.22394329896907217,0.099844444444444444,0.12280241935483872,0.26602536997885828,0.02244943820224719],"mode":"lines","type":"scatter","name":"30","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2022-06-01","2022-06-02","2022-06-03","2022-06-04","2022-06-05","2022-06-06","2022-06-07","2022-06-08","2022-06-09","2022-06-10","2022-06-11","2022-06-12","2022-06-13","2022-06-14","2022-06-15","2022-06-16","2022-06-17","2022-06-18","2022-06-19","2022-06-20","2022-06-21","2022-06-22","2022-06-23","2022-06-24","2022-06-25","2022-06-26","2022-06-27","2022-06-28","2022-06-29","2022-06-30","2022-07-01","2022-07-02","2022-07-03","2022-07-04","2022-07-05","2022-07-06","2022-07-07","2022-07-08","2022-07-09","2022-07-10","2022-07-11","2022-07-12","2022-07-13","2022-07-14","2022-07-15","2022-07-16","2022-07-17","2022-07-18","2022-07-19","2022-07-20","2022-07-21","2022-07-22","2022-07-23","2022-07-24","2022-07-25","2022-07-26","2022-07-27","2022-07-28","2022-07-29","2022-07-30","2022-07-31"],"y":[0.26655857501712732,0.49644416243654838,0.37066089466089475,1.235069365476462,0.48194875933024034,0.37786186459995452,0.28935358255451715,0.40320905763952442,0.33926074930852412,0.36845917225950786,0.37940203261640293,0.44099430573806414,0.35189189189189202,0.4291886792452832,0.23105574107372212,0.69377713458755463,0.25320421728168691,0.28588552915766752,0.24024440894568694,0.26756114246622215,0.144866754041066,0.54197654363573655,0.36737768391411474,0.28613999181334426,0.38631628787878786,0.19567184035476715,0.21021002386634843,0.23303830911492737,0.3545211581291759,0.51929848693259972,0.49158347676419967,0.1830095541401274,0.80195275590551196,0.71018062397372739,0.30957999999999997,0.43896130346232182,0.60953307392996114,0.66479477611940285,0.41241134751773056,0.24332773109243697,0.41715034965034969,0.50446893787575153,0.15887892376681614,0.078467908902691508,0.18703163017031632,0.14993273542600899,0.37945368171021376,0.24542168674698797,0.15050228310502284,0.56429752066115701,0.43739240506329119,0.67205479452054795,0.059075829383886252,0.12143805309734514,0.17738578680203046,0.12452322738386308,0.22394329896907217,0.099844444444444444,0.12280241935483872,0.26602536997885828,0.02244943820224719],"mode":"lines","type":"scatter","name":"7","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="метрики-монетизации-1" class="section level2 hasAnchor">
<h2>Метрики монетизации<a href="c6_monetization.html#метрики-монетизации-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Для июньской когорты, с разбивкой по платформе посчитать:</p>
<ul>
<li>количество пользователей</li>
<li>количество платящих пользователей</li>
<li>конверсия</li>
<li>гросс</li>
<li>арпу</li>
<li>арппу</li>
<li>средний размер платежа (гросс / количество платежей)</li>
<li>среднее количество платежей на пользователя (количество платежей / количество платящих)</li>
</ul>
<p>Все в окне 30 дней от инсталла.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="c6_monetization.html#cb39-1" tabindex="-1"></a>installs_june <span class="ot">&lt;-</span> installs[dt <span class="sc">&lt;</span> <span class="st">&#39;2022-07-01&#39;</span>]</span>
<span id="cb39-2"><a href="c6_monetization.html#cb39-2" tabindex="-1"></a>installs_june_stat <span class="ot">&lt;-</span> installs_june[, <span class="fu">list</span>(<span class="at">total_users =</span> <span class="fu">uniqueN</span>(user_pseudo_id)), by <span class="ot">=</span> platform]</span>
<span id="cb39-3"><a href="c6_monetization.html#cb39-3" tabindex="-1"></a></span>
<span id="cb39-4"><a href="c6_monetization.html#cb39-4" tabindex="-1"></a></span>
<span id="cb39-5"><a href="c6_monetization.html#cb39-5" tabindex="-1"></a>payments_june <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb39-6"><a href="c6_monetization.html#cb39-6" tabindex="-1"></a>    installs_june[, <span class="fu">list</span>(user_pseudo_id, dt)],</span>
<span id="cb39-7"><a href="c6_monetization.html#cb39-7" tabindex="-1"></a>    payments,</span>
<span id="cb39-8"><a href="c6_monetization.html#cb39-8" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">&#39;user_pseudo_id&#39;</span>, <span class="at">all =</span> <span class="cn">FALSE</span></span>
<span id="cb39-9"><a href="c6_monetization.html#cb39-9" tabindex="-1"></a>)</span>
<span id="cb39-10"><a href="c6_monetization.html#cb39-10" tabindex="-1"></a>payments_june[, lifetime <span class="sc">:=</span> pay_dt <span class="sc">-</span> dt]</span>
<span id="cb39-11"><a href="c6_monetization.html#cb39-11" tabindex="-1"></a>payments_june <span class="ot">&lt;-</span> payments_june[lifetime <span class="sc">&lt;=</span> <span class="dv">30</span>]</span>
<span id="cb39-12"><a href="c6_monetization.html#cb39-12" tabindex="-1"></a></span>
<span id="cb39-13"><a href="c6_monetization.html#cb39-13" tabindex="-1"></a>payments_june_stat <span class="ot">&lt;-</span> payments_june[, <span class="fu">list</span>(</span>
<span id="cb39-14"><a href="c6_monetization.html#cb39-14" tabindex="-1"></a>    <span class="at">payers_30 =</span> <span class="fu">uniqueN</span>(user_pseudo_id),</span>
<span id="cb39-15"><a href="c6_monetization.html#cb39-15" tabindex="-1"></a>    <span class="at">gross_30 =</span> <span class="fu">sum</span>(gross),</span>
<span id="cb39-16"><a href="c6_monetization.html#cb39-16" tabindex="-1"></a>    <span class="at">n_transactions_30 =</span> <span class="fu">length</span>(ts)</span>
<span id="cb39-17"><a href="c6_monetization.html#cb39-17" tabindex="-1"></a>  ), </span>
<span id="cb39-18"><a href="c6_monetization.html#cb39-18" tabindex="-1"></a>  by <span class="ot">=</span> platform]</span>
<span id="cb39-19"><a href="c6_monetization.html#cb39-19" tabindex="-1"></a></span>
<span id="cb39-20"><a href="c6_monetization.html#cb39-20" tabindex="-1"></a>users_june_stat <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb39-21"><a href="c6_monetization.html#cb39-21" tabindex="-1"></a>  installs_june_stat,</span>
<span id="cb39-22"><a href="c6_monetization.html#cb39-22" tabindex="-1"></a>  payments_june_stat,</span>
<span id="cb39-23"><a href="c6_monetization.html#cb39-23" tabindex="-1"></a>  <span class="at">by =</span> <span class="st">&#39;platform&#39;</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span></span>
<span id="cb39-24"><a href="c6_monetization.html#cb39-24" tabindex="-1"></a>)</span>
<span id="cb39-25"><a href="c6_monetization.html#cb39-25" tabindex="-1"></a></span>
<span id="cb39-26"><a href="c6_monetization.html#cb39-26" tabindex="-1"></a></span>
<span id="cb39-27"><a href="c6_monetization.html#cb39-27" tabindex="-1"></a>users_june_stat[, gross_30 <span class="sc">:=</span> <span class="fu">round</span>(gross_30)]</span>
<span id="cb39-28"><a href="c6_monetization.html#cb39-28" tabindex="-1"></a>users_june_stat[, Conversion_30 <span class="sc">:=</span> <span class="fu">paste0</span>(<span class="fu">round</span>(payers_30 <span class="sc">/</span> total_users <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>), <span class="st">&#39;%&#39;</span>)]</span>
<span id="cb39-29"><a href="c6_monetization.html#cb39-29" tabindex="-1"></a>users_june_stat[, ARPU_30 <span class="sc">:=</span> <span class="fu">round</span>(gross_30 <span class="sc">/</span> total_users, <span class="dv">3</span>)]</span>
<span id="cb39-30"><a href="c6_monetization.html#cb39-30" tabindex="-1"></a>users_june_stat[, ARPPU_30 <span class="sc">:=</span> <span class="fu">round</span>(gross_30 <span class="sc">/</span> payers_30, <span class="dv">3</span>)]</span>
<span id="cb39-31"><a href="c6_monetization.html#cb39-31" tabindex="-1"></a>users_june_stat[, Av.Check_30 <span class="sc">:=</span> <span class="fu">round</span>(gross_30 <span class="sc">/</span> n_transactions_30, <span class="dv">1</span>)]</span>
<span id="cb39-32"><a href="c6_monetization.html#cb39-32" tabindex="-1"></a>users_june_stat[, Av.Purchases_30 <span class="sc">:=</span> <span class="fu">round</span>(n_transactions_30 <span class="sc">/</span> payers_30, <span class="dv">1</span>)]</span>
<span id="cb39-33"><a href="c6_monetization.html#cb39-33" tabindex="-1"></a></span>
<span id="cb39-34"><a href="c6_monetization.html#cb39-34" tabindex="-1"></a>users_june_stat</span></code></pre></div>
<pre><code>## Key: &lt;platform&gt;
##    platform total_users payers_30 gross_30 n_transactions_30 Conversion_30
##      &lt;char&gt;       &lt;int&gt;     &lt;int&gt;    &lt;num&gt;             &lt;int&gt;        &lt;char&gt;
## 1:  ANDROID       77770      1143    25452              3376          1.5%
## 2:      IOS       33010      1458    65402              7346          4.4%
##    ARPU_30 ARPPU_30 Av.Check_30 Av.Purchases_30
##      &lt;num&gt;    &lt;num&gt;       &lt;num&gt;           &lt;num&gt;
## 1:   0.327   22.268         7.5               3
## 2:   1.981   44.857         8.9               5</code></pre>
</div>
<div id="arpdau" class="section level2 hasAnchor">
<h2>ARPDAU<a href="c6_monetization.html#arpdau" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Некогортная метрика – сколько в среднем приносит каждый зашедший в этот день пользователь. Обычно используется на дашбордах для мониторинга, какие сегменты пользователей как платят.</p>
<p>ARPDAU = revenue / DAU</p>
</div>
<div id="paying-share" class="section level2 hasAnchor">
<h2>Paying share<a href="c6_monetization.html#paying-share" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Еще одна некогортная метрика – какая доля платящих среди зашедших в этот день. Также используется для мониторинга.</p>
<p>Paying share = Payers / DAU</p>
</div>
<div id="воронка-платежей" class="section level2 hasAnchor">
<h2>Воронка платежей<a href="c6_monetization.html#воронка-платежей" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Доля пользователей, которые сделали второй, третий и т.д. платеж. Нужна для понимания, совершают ли пользователи повторные платежи. Дальше начинаются вопросы и интерпретации – почему не сделал второй платеж, и т. д.</p>
<p>Алгоритм расчета:
- берем таблицу платежей пользователя
- сортируем по времени платежа
- создаем новую колонку-счетчик (1, 2, 3) платежей для каждого пользователя
- считаем, сколько пользователей сделало каждый номер платежа (т.е группируем по этому счетчику)
- делим количество пользователей на сколько всего было пользователей, сделавших первый платеж (т.е. на значение из первой колонки)
- рисуем барчартами</p>
<ul>
<li>опционально: лучше ограничить это все на лайфтайм (например, на 7 дней) и на количество платежей (например, 10, чтобы баров было не сильно много и график был читаемым)</li>
</ul>
<p>Как создать колонку-счетчик:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="c6_monetization.html#cb41-1" tabindex="-1"></a><span class="co"># в R</span></span>
<span id="cb41-2"><a href="c6_monetization.html#cb41-2" tabindex="-1"></a>my_dt[, counter <span class="sc">:=</span> <span class="dv">1</span><span class="sc">:</span>.N, by <span class="ot">=</span> uid]</span>
<span id="cb41-3"><a href="c6_monetization.html#cb41-3" tabindex="-1"></a></span>
<span id="cb41-4"><a href="c6_monetization.html#cb41-4" tabindex="-1"></a><span class="co"># в Python</span></span>
<span id="cb41-5"><a href="c6_monetization.html#cb41-5" tabindex="-1"></a>my_dt[<span class="st">&#39;counter&#39;</span>] <span class="ot">=</span> <span class="fu">my_dt.groupby</span>(<span class="st">&#39;uid&#39;</span>)<span class="fu">.cumcount</span>() <span class="sc">+</span> <span class="dv">1</span></span></code></pre></div>
</div>
<div id="домашнее-задание-5" class="section level2 hasAnchor">
<h2>Домашнее задание<a href="c6_monetization.html#домашнее-задание-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="level-1-iatytd-4" class="section level3 hasAnchor">
<h3>level 1 (IATYTD)<a href="c6_monetization.html#level-1-iatytd-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Внимательно разберите решения заданий (материалы конспекта).</p>
</div>
<div id="level-2-hntr-7" class="section level3 hasAnchor">
<h3>level 2 (HNTR)<a href="c6_monetization.html#level-2-hntr-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Рассчитайте табличку с метриками монетизации для июньской когорты. Сделайте разбивку по платформам. Попробуйте проинтерпретировать результаты.</p>
</div>
<div id="level-3-hmp-4" class="section level3 hasAnchor">
<h3>level 3 (HMP)<a href="c6_monetization.html#level-3-hmp-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Рассчитайте табличку с метриками монетизации для июньской и июльской когорт (должно быть две строки в табличке, отдельно на каждую когорту). Выберите правильный период лайфтайма. Попробуйте проинтерпретировать результаты.</p>
</div>
<div id="level-4-uv-7" class="section level3 hasAnchor">
<h3>level 4 (UV)<a href="c6_monetization.html#level-4-uv-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Постройте воронку платежей для июньской когорты. Сделайте разбивку по платформам. Попробуйте проинтерпретировать результаты.</p>
</div>
<div id="level-5-n-7" class="section level3 hasAnchor">
<h3>level 5 (N)<a href="c6_monetization.html#level-5-n-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Постройте графики ARPDAU и Paying Share. Для этого вам понадобится табличка логинов (<a href="https://gitlab.com/hse_mar/mar211f/-/raw/main/data/dau.csv" class="uri">https://gitlab.com/hse_mar/mar211f/-/raw/main/data/dau.csv</a>).</p>
<p>Сделайте эти метрики в разбивке по тому, как давно пользователи пришли в приложение:</p>
<ul>
<li>группа 1: 0 дней с инсталла</li>
<li>группа 2: 1-7 дней с момента инсталла</li>
<li>группа 3: 8-28 дней с инсталла</li>
<li>группа 4: более 28 дней с инсталла</li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="c5_monetization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="c7_monetization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
